/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

window.MRT=window.MRT||{},function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("almond",["almond/almond"],function(e){return e}),n("almond/almond",function(){}),n("js/lodash",[],function(){return window._}),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof n=="function"&&n.amd)n("q/q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(t,n){if(e&&n.stack&&typeof t=="object"&&t!==null&&t.stack&&t.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var s=r.join("\n"+w+"\n");t.stack=S(s)}}function S(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!x(i)&&i&&n.push(i)}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function N(e){var t=T(e);if(!t)return!1;var i=t[0],s=t[1];return i===r&&s>=n&&s<=lt}function C(){if(!e)return;try{throw new Error}catch(t){var n=t.stack.split("\n"),i=n[0].indexOf("@")>0?n[1]:n[2],s=T(i);if(!s)return;return r=s[0],s[1]}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(e){return H(e)?e:B(e)?G(e):Q(e)}function A(){function l(e){r=e,o.source=e,f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=h(A.prototype),o=h(_.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);t?(t.push(u),i==="when"&&o[1]&&n.push(o[1])):s(function(){r.promiseDispatch.apply(r,u)})},o.valueOf=k(function(){if(t)return o;var e=P(r);return H(e)&&(r=e),e},"valueOf","inspect"),o.inspect=function(){return r?r.inspect():{state:"pending"}};if(L.longStackSupport&&e)try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(e){if(r)return;l(L(e))},i.fulfill=function(e){if(r)return;l(Q(e))},i.reject=function(e){if(r)return;l(K(e))},i.notify=function(e){if(r)return;f(n,function(t,n){s(function(){n(e)})},void 0)},i}function O(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function M(e){return O(function(t,n){for(var r=0,i=e.length;r<i;r++)L(e[r]).then(t,n)})}function _(e,t,n){t===void 0&&(t=function(e){return K(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(_.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=K(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=k(function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value})}return r}function D(e,t,n,r){return L(e).then(t,n,r)}function P(e){if(H(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function H(e){return m(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function B(e){return m(e)&&typeof e.then=="function"}function j(e){return H(e)&&e.inspect().state==="pending"}function F(e){return!H(e)||e.inspect().state==="fulfilled"}function I(e){return H(e)&&e.inspect().state==="rejected"}function W(){!U&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",q),U=!0}function X(){for(var e=0;e<q.length;e++){var t=q[e];console.warn("Unhandled rejection reason:",t)}}function V(){q.length=0,R.length=0,U=!1,z||(z=!0,typeof process!="undefined"&&process.on&&process.on("exit",X))}function $(e,t){if(!z)return;R.push(e),t&&typeof t.stack!="undefined"?q.push(t.stack):q.push("(no stack) "+t),W()}function J(e){if(!z)return;var t=l(R,e);t!==-1&&(R.splice(t,1),q.splice(t,1))}function K(e){var t=_({when:function(t){return t&&J(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return $(t,e),t}function Q(e){return _({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e){var t=A();return s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function Y(e){return _({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return L(e).inspect()})}function Z(e,t,n){return L(e).spread(t,n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return K(o)}return s.done?s.value:D(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?o.value:K(o)}return D(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,st(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){return L(e).dispatch(t,n)}function st(e){return D(e,function(e){var t=0,n=A();return f(e,function(r,i,s){var o;H(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,D(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function ot(e){return D(e,function(e){return e=c(e,L),D(st(c(e,function(e){return D(e,i,i)})),function(){return e})})}function ut(e){return L(e).allSettled()}function at(e,t){return L(e).then(void 0,void 0,t)}function ft(e,t){return L(e).nodeify(t)}var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n=C(),r,i=function(){},s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;r&&(e.domain=void 0,r.enter());try{t()}catch(s){if(i)throw r&&r.exit(),setTimeout(o,0),r&&r.enter(),s;setTimeout(function(){throw s},0)}r&&r.exit()}n=!1}var e={task:void 0,next:null},t=e,n=!1,r=void 0,i=!1;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null},n||(n=!0,r())};if(typeof process!="undefined"&&process.nextTick)i=!0,r=function(){process.nextTick(o)};else if(typeof setImmediate=="function")typeof window!="undefined"?r=setImmediate.bind(window,o):r=function(){setImmediate(o)};else if(typeof MessageChannel!="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a,u.port1.onmessage=o,o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0),a()}}else r=function(){setTimeout(o,0)};return s}(),o=Function.call,a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b;try{new Function("(function* (){ yield 1; })"),b=!0}catch(t){b=!1}var w="From previous event:";L.resolve=L,L.nextTick=s,L.longStackSupport=!1,L.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},L.promise=O,L.passByCopy=function(e){return e},_.prototype.passByCopy=function(){return this},L.join=function(e,t){return L(e).join(t)},_.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},L.race=M,_.prototype.race=function(){return this.then(L.race)},L.makePromise=_,_.prototype.toString=function(){return"[object Promise]"},_.prototype.then=function(e,t,n){function u(t){try{return typeof e=="function"?e(t):t}catch(n){return K(n)}}function a(e){if(typeof t=="function"){E(e,r);try{return t(e)}catch(n){return K(n)}}return K(e)}function f(e){return typeof n=="function"?n(e):e}var r=this,i=A(),o=!1;return s(function(){r.promiseDispatch(function(e){if(o)return;o=!0,i.resolve(u(e))},"when",[function(e){if(o)return;o=!0,i.resolve(a(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!L.onerror)throw r;L.onerror(r)}n||i.notify(t)}]),i.promise},L.when=D,_.prototype.thenResolve=function(e){return this.then(function(){return e})},L.thenResolve=function(e,t){return L(e).thenResolve(t)},_.prototype.thenReject=function(e){return this.then(function(){throw e})},L.thenReject=function(e,t){return L(e).thenReject(t)},L.nearer=P,L.isPromise=H,L.isPromiseAlike=B,L.isPending=j,_.prototype.isPending=function(){return this.inspect().state==="pending"},L.isFulfilled=F,_.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},L.isRejected=I,_.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[],R=[],U=!1,z=!0;L.resetUnhandledRejections=V,L.getUnhandledReasons=function(){return q.slice()},L.stopUnhandledRejectionTracking=function(){V(),typeof process!="undefined"&&process.on&&process.removeListener("exit",X),z=!1},V(),L.reject=K,L.fulfill=Q,L.master=Y,L.spread=Z,_.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},L.async=et,L.spawn=tt,L["return"]=nt,L.promised=rt,L.dispatch=it,_.prototype.dispatch=function(e,t){var n=this,r=A();return s(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},L.get=function(e,t){return L(e).dispatch("get",[t])},_.prototype.get=function(e){return this.dispatch("get",[e])},L.set=function(e,t,n){return L(e).dispatch("set",[t,n])},_.prototype.set=function(e,t){return this.dispatch("set",[e,t])},L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])},_.prototype.del=_.prototype["delete"]=function(e){return this.dispatch("delete",[e])},L.mapply=L.post=function(e,t,n){return L(e).dispatch("post",[t,n])},_.prototype.mapply=_.prototype.post=function(e,t){return this.dispatch("post",[e,t])},L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,a(arguments,2)])},_.prototype.send=_.prototype.mcall=_.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])},L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])},_.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,a(arguments,1)])},_.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},L.fbind=function(e){var t=L(e),n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},_.prototype.fbind=function(){var e=this,t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}},L.keys=function(e){return L(e).dispatch("keys",[])},_.prototype.keys=function(){return this.dispatch("keys",[])},L.all=st,_.prototype.all=function(){return st(this)},L.allResolved=k(ot,"allResolved","allSettled"),_.prototype.allResolved=function(){return ot(this)},L.allSettled=ut,_.prototype.allSettled=function(){return this.then(function(e){return st(c(e,function(e){function t(){return e.inspect()}return e=L(e),e.then(t,t)}))})},L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)},_.prototype.fail=_.prototype["catch"]=function(e){return this.then(void 0,e)},L.progress=at,_.prototype.progress=function(e){return this.then(void 0,void 0,e)},L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)},_.prototype.fin=_.prototype["finally"]=function(e){return e=L(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},L.done=function(e,t,n,r){return L(e).done(t,n,r)},_.prototype.done=function(e,t,n){var r=function(e){s(function(){E(e,i);if(!L.onerror)throw e;L.onerror(e)})},i=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},L.timeout=function(e,t,n){return L(e).timeout(t,n)},_.prototype.timeout=function(e,t){var n=A(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},L.delay=function(e,t){return t===void 0&&(t=e,e=void 0),L(e).delay(t)},_.prototype.delay=function(e){return this.then(function(t){var n=A();return setTimeout(function(){n.resolve(t)},e),n.promise})},L.nfapply=function(e,t){return L(e).nfapply(t)},_.prototype.nfapply=function(e){var t=A(),n=a(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},L.nfcall=function(e){var t=a(arguments,1);return L(e).nfapply(t)},_.prototype.nfcall=function(){var e=a(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},L.nfbind=L.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=A();return n.push(r.makeNodeResolver()),L(e).fapply(n).fail(r.reject),r.promise}},_.prototype.nfbind=_.prototype.denodeify=function(){var e=a(arguments);return e.unshift(this),L.denodeify.apply(void 0,e)},L.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=A();return r.push(i.makeNodeResolver()),L(s).fapply(r).fail(i.reject),i.promise}},_.prototype.nbind=function(){var e=a(arguments,0);return e.unshift(this),L.nbind.apply(void 0,e)},L.nmapply=L.npost=function(e,t,n){return L(e).npost(t,n)},_.prototype.nmapply=_.prototype.npost=function(e,t){var n=a(t||[]),r=A();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},L.nsend=L.nmcall=L.ninvoke=function(e,t){var n=a(arguments,2),r=A();return n.push(r.makeNodeResolver()),L(e).dispatch("post",[t,n]).fail(r.reject),r.promise},_.prototype.nsend=_.prototype.nmcall=_.prototype.ninvoke=function(e){var t=a(arguments,1),n=A();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},L.nodeify=ft,_.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})};var lt=C();return L}),n("q",["q/q"],function(e){return e}),n("js/jquery",[],function(){return window.$}),function(e,r){if(typeof n=="function"&&n.amd)n("backbone-amd/backbone",["underscore","jquery","exports"],function(t,n,i){r(e,i,t,n)});else if(typeof exports!="undefined"){var i=t("underscore");r(e,exports,i)}else e.Backbone=r(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.slice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!f(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){if(!this._events||!f(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;var i=e?[e]:n.keys(this._events);for(var s=0,o=i.length;s<o;s++){e=i[s];var u=this._events[e];if(!u)continue;if(!t&&!r){delete this._events[e];continue}var a=[];for(var l=0,c=u.length;l<c;l++){var h=u[l];(t&&t!==h.callback&&t!==h.callback._callback||r&&r!==h.context)&&a.push(h)}a.length?this._events[e]=a:delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(a.test(n)){var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},l=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(e,t){u[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(t,u);var h=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",generateId:function(e){return e[this.idAttribute]},initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes;for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;var h=this.id;this.id=this.generateId(c),h!==this.id&&this.trigger("change-id",this,h,r);if(!a){u.length&&(this._pending=r);for(var p=0,d=u.length;p<d;p++)this.trigger("change:"+u[p],this,c[u[p]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},H(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},H(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;H(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){if(!n[e])return;h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var d=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(d.prototype,u,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});for(var i=0,s=e.length;i<s;i++){var o=e[i]=this.get(e[i]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid];var u=this.indexOf(o);this.models.splice(u,1),this.length--,t.silent||(t.index=u,o.trigger("remove",o,this,t)),this._removeReference(o,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,v),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:e.slice();var i,s,o,u,a,f=t.at,l=this.comparator&&f==null&&t.sort!==!1,c=n.isString(this.comparator)?this.comparator:null,p=[],d=[],m={},g=t.add,y=t.merge,b=t.remove,w=!l&&g&&b?[]:!1,E=this.model.prototype;for(var S=0,x=e.length;S<x;S++){o=e[S]||{},this._isModel(o)?i=s=o:E.generateId?i=E.generateId(o):i=o[E.idAttribute||h.prototype.idAttribute];if(u=this.get(i))b&&(m[u.cid]=!0),y&&(o=o===s?s.attributes:o,t.parse&&(o=u.parse(o,t)),u.set(o,t),l&&!a&&u.hasChanged(c)&&(a=!0)),e[S]=u;else if(g){s=e[S]=this._prepareModel(o,t);if(!s)continue;p.push(s),this._addReference(s,t)}s=u||s;if(!s)continue;w&&(s.isNew()||!m[s.id])&&w.push(s),m[s.id]=!0}if(b){for(var S=0,x=this.length;S<x;S++)m[(s=this.models[S]).cid]||d.push(s);d.length&&this.remove(d,t)}if(p.length||w&&w.length){l&&(a=!0),this.length+=p.length;if(f!=null)for(var S=0,x=p.length;S<x;S++)this.models.splice(f+S,0,p[S]);else{w&&(this.models.length=0);var T=w||p;for(var S=0,x=T.length;S<x;S++)this.models.push(T[S])}}a&&this.sort({silent:!0});if(!t.silent){for(var S=0,x=p.length;S<x;S++)(s=p[S]).trigger("add",s,this,t);(a||w&&w.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_isModel:function(e){return e instanceof h},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),e==="change-id"&&(n!=null&&delete this._byId[n],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];n.each(g,function(e){if(!n[e])return;d.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){if(!n[e])return;d.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,E)),this._ensureElement(),this.initialize.apply(this,arguments)},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(w);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){this.$el.on(e+".delegateEvents"+this.cid,t,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){this.$el.off(e+".delegateEvents"+this.cid,t,n)},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=x[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||P()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&S&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.apply(this,arguments)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var S=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,k=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(L,"\\$&").replace(N,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,_=/#.*$/;A.started=!1,n.extend(A.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.location.search},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=decodeURI(this.location.pathname+this.location.search),t=this.root.slice(0,-1);return e.indexOf(t)||(e=e.slice(t.length)),e.slice(1)},getFragment:function(e){return e==null&&(this._hasPushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(O,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var t=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this.root=("/"+this.root+"/").replace(M,"/");if(!this._hasHashChange&&this._wantsHashChange&&(!this._wantsPushState||!this._hasPushState)){var r=document.createElement("iframe");r.src="javascript:0",r.style.display="none",r.tabIndex=-1;var i=document.body;this.iframe=i.insertBefore(r,i.firstChild).contentWindow,this.navigate(this.fragment)}this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!A.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(_,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe)&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new A;var D=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};h.extend=d.extend=T.extend=b.extend=A.extend=D;var P=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),n("backbone-amd",["backbone-amd/backbone"],function(e){return e}),n("massrel-js-backbone/backbone",["require","backbone-amd"],function(e){var t=e("backbone-amd");return(window["massrel-js-backbone"]||window).Backbone||t}),n("massrel-js-backbone/MediaModel",["require","./backbone","lodash"],function(e){var t=e("./backbone"),n=e("lodash");return t.Model.extend({defaults:function(){return{type:{},size:"large",provider:{},providerName:"",photo_urls:{},embed_url:"",embed_html:"",caption:"",description:"",link:""}},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);if(e.size&&e.photo_urls[e.size])e.photo_url=e.photo_urls[e.size].url;else{var r=n.first(n.values(e.photo_urls));e.photo_url=r?r.url:""}return e}})}),n("massrel-js/globals",{host:"api.massrelevance.com",timeout:1e4,protocol:document.location.protocol==="https:"?"https":"http",min_poll_interval:5e3,max_backoff_interval:6e4,backoff_rate:1.8,max_reqs_per_min:5,jsonp_param:"jsonp"}),n("massrel-js/helpers",["./globals"],function(e){var t={},n=encodeURIComponent;t.step_through=function(e,n,r){e=t.is_array(e)?e:[e];var i=e.length-1;if(i>=0)for(;i>=0;i--){var s=e[i];for(var o=0,u=n.length;o<u;o++)n[o].call(r,s)}},t.extend=function(e,t){var n;for(n in t)typeof e[n]=="undefined"&&(e[n]=t[n]);return e},t.api_url=function(t,n){var n=n||e.host,r=e.port,i=e.protocol+"://"+n+(r?":"+r:"");return i+t},t.req={},t.req.supportsXhr2=window.XMLHttpRequest!=null&&"withCredentials"in new XMLHttpRequest,t.req.supportsCors=t.req.supportsXhr2||"XDomainRequest"in window,t.req.supportsJSON="JSON"in window,t.req.xdr=function(n,r,i,s,o,u){var a,f=!1,l,c=function(e){f=!0;var n,r=!1;try{n=JSON.parse(e)}catch(i){r=!0,h(new Error("JSON parse error"))}r||(typeof o=="function"?o(n):t.is_array(o)&&o.length>0&&t.step_through(n,o,s))},h=function(e){f=!0,typeof u=="function"&&u(e)};window.XMLHttpRequest&&t.req.supportsXhr2?a=new XMLHttpRequest:window.XDomainRequest&&(a=new XDomainRequest),a?(a.open("GET",n+"?"+t.to_qs(r)),a.timeout=e.timeout,a.onerror=h,a.onprogress=function(){},a.ontimeout=h,a.onload=function(){c(a.responseText)},a.send(null),l=setTimeout(function(){f||(a.onerror=function(){},a.onprogress=function(){},a.ontimeout=function(){},a.onload=function(){},a.abort&&a.abort(),h())},e.timeout)):h(new Error("CORS not supported"))},t.req.jsonp=function(n,i,s,o,u,a){var f=s+ ++r,l=!1,c;e._json_callbacks[f]=function(n){typeof u=="function"?u(n):t.is_array(u)&&u.length>0&&t.step_through(n,u,o),delete e._json_callbacks[f],l=!0,clearTimeout(c)},i.push([e.jsonp_param,"massrel._json_callbacks."+f]);var h=t.load(n+"?"+t.to_qs(i));c=setTimeout(function(){l||(e._json_callbacks[f]=function(){delete e._json_callbacks[f]},typeof a=="function"&&a(),h.stop())},e.timeout)},t.jsonp_factory=t.req.jsonp,t.req.counts=[],t.req.total_counts=0,t.req.counter=function(n){var r=+(new Date),i=e.max_reqs_per_min,s=t.req.counts,o=6e4;t.req.total_counts=t.req.total_counts+1;while(s.length>i)s.shift();if(s.length===i){var u=r-s[0];if(u<o){var a="Warn: requested more than "+i+" times in the last minute ("+t.req.total_counts+" reqs total)";if(n)throw new Error(a);window.console&&console.warn&&console.warn(a)}}while(s.length>=i)s.shift();return s.push(r),r};var r=0;e._json_callbacks={},t.request_factory=function(e,n,r,i,s,o){t.req.counter(),t.req.supportsCors&&t.req.supportsJSON?t.req.xdr(e,n,r,i,s,o):t.req.jsonp(e,n,r,i,s,o)},t.is_array=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.is_number=function(e){return Object.prototype.toString.call(e)==="[object Number]"};var i=document.getElementsByTagName("head")[0]||document.body;t.load=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e;var r=!1;return n.onload=n.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=!0,n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),typeof t=="function"&&t())},i.insertBefore(n,i.firstChild),{stop:function(){n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n.src="#"}}},t.to_qs=function(e){var r=[],i;if(e&&e.length){for(var s=0,o=e.length;s<o;s++){i=e[s][1];if(t.is_array(i)){var u=[];for(var a=0,f=i.length;a<f;a++)u[a]=n(i[a]||"");i=u.join(",")}else i!==undefined&&i!==null?i=n(i):i="";r.push(n(e[s][0])+"="+i)}return r.join("&")}return""};var s=/\+\d{4} \d{4}$/,o=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+\d{4})$/,u=/^(\d{4})-(\d\d)-(\d\d)T(\d\d)\:(\d\d)\:(\d\d)\.(\d{3})Z$/;return t.fix_date=t.fix_twitter_date=function(e){e=e.toString();if(s.test(e)){e=e.split(" ");var t=e.pop();e.splice(3,0,t),e=e.join(" ")}else o.test(e)?e=e.replace(o,"$1/$2/$3 $4:$5:$6 $7"):u.test(e)&&(e=e.replace(u,"$1/$2/$3 $4:$5:$6 +0000"));return e},t.parse_params=function(e){e=e||window.location.search.substring(1);var t={};e.charAt(0)==="?"&&(e=e.substring(1));if(e.length>0){e=e.replace(/\+/g," ");var n=e.split(/[&;]/g);for(var r=0;r<n.length;r++){var i=n[r].split("="),s=decodeURIComponent(i[0]),o=i.length>1?decodeURIComponent(i[1]):"";if(s in t){var u=t[s];typeof u!="string"?t[s].push(o):(t[s]=[],t[s].push(u),t[s].push(o))}else t[s]=o}}return t},t.poll_interval=function(t){var n=e.min_poll_interval;return Math.max(t||n,n)},t.poll_backoff=function(t,n){var r=e.max_backoff_interval;return t<r&&(n=Math.max(n-1,0),t*=Math.pow(e.backoff_rate,n),t=Math.min(t||r,r)),t},t.callback_group=function(e){e=e||1;var t=0,n=!0,r=function(r,i){return function(){if(n){if(t<=e)return r.apply(i||this,arguments);throw new Error("Callback group max call count exceeded")}}};return r.deactivate=function(){n=!1},r},t.timeParam=function(e,t,n,r){typeof e!="undefined"&&(e.getTime&&(e=e.getTime()/1e3),e=+e,!isNaN(e)&&e>0?(e=Math.floor(e/60)*60,n.push([t,e])):!isNaN(e)&&r&&e<=0&&n.push([t,e]))},t.always=function(e){var t=new $.Deferred;if(e===undefined)return t.resolve(),t.promise();e.length===undefined&&(e=[e]);var n=e.length,r=function(){n--,n===0&&t.resolve()};return $.each(e,function(){this.always(r)}),t.promise()},t}),n("massrel-js/generic_poller_cycle",["./helpers"],function(e){function t(t,n,r){this.cg=e.callback_group(),this.skip=this.cg(t),this.callback=this.cg(n),this.errback=this.cg(r),this._enabled=!0}return t.prototype.enabled=function(){return this._enabled},t.prototype.disable=function(){this.cg.deactivate(),this._enabled=!1},t}),n("massrel-js/generic_poller",["./helpers","./generic_poller_cycle"],function(e,t){function n(r,i){var s=this,o=function(){if(f){var i=e.callback_group(),o=i(u),l=function(t){s.consecutive_errors=0,n.failure_mode=s.failure_mode=!1;if(f){for(var r=0,i=s._filters.length;r<i;r++)t=s._filters[r].call(s,t);e.step_through([t],s._listeners,s),f&&o()}},c=function(){s.consecutive_errors+=1,n.failure_mode=s.failure_mode=!0,o(!0)};a=new t(o,l,c),s.fetch(r,s.opts,a)}},u=function(t){var n=e.poll_interval(s.frequency*1e3);t&&(n=e.poll_backoff(n,s.consecutive_errors)),l=setTimeout(o,n)},a=null,f=!1,l;this._listeners=[],this._filters=[],this.object=r,this.opts=i||{},this.frequency=this.opts.frequency||30,this.alive_count=0,this.consecutive_errors=0,this.failure_mode=!1,this.start=function(){return f||(f=!0,o()),this},this.stop=function(){return a&&(a.disable(),a=null),clearTimeout(l),f=!1,this}}return n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.data=function(e){return this._listeners.push(e),this},n.prototype.filter=function(e){return this._filters.push(e),this},n.failure_mode=!1,n}),n("massrel-js/poller_queue",["./helpers"],function(e){function t(t,n){function l(){a=f.total,setTimeout(function(){if(f.poller.enabled&&f.total===a&&i.length>0&&r.length===0){var e=Math.min(Math.floor(i.length*Math.random()),i.length-1),t=i[e];r.push(t),f.total+=1,f.enqueued+=1,f.reused+=1,c()}l()},n.history_timeout*1e3)}function c(){if(!o&&r.length>0&&typeof s=="function"){var e=++u;f.enqueued-=1,f.count+=1;var t=r.shift();o=!0,s.call(f,t,function(){e===u&&(o=!1,setTimeout(c,0))}),n.history_size>0&&!t.__recycled&&(n.history_size===i.length&&i.shift(),t.__recycled=!0,i.push(t))}}this.poller=t,n=e.extend(n||{},{history_size:0,history_timeout:t.frequency/1e3});var r=[],i=[],s=null,o=!1,u=0,a=0;this.total=0,this.enqueued=0,this.count=0,this.reused=0;var f=this;t.batch(function(e){var t=e.length,n=t-1;for(;n>=0;n--)r.push(e[n]);f.total+=t,f.enqueued+=t,c()}),n.history_size>0&&l(),this.next=function(e){!o&&typeof e=="function"&&(s=e,c())}}return t}),n("massrel-js/poller",["./helpers","./generic_poller","./poller_queue"],function(e,t,n){function r(e,n){t.call(this,e,n),this.stream=this.object,this.filter(this.filter_newer);var n=this.opts;this.newest_timestamp=n.newest_timestamp||null,this.stay_realtime="stay_realtime"in n?!!n.stay_realtime:!0,this.hail_mary_mode=!!n.hail_mary_mode,this.first=!0}return e.extend(r.prototype,t.prototype),r.prototype.fetch=function(t,n,r){var i=this,s={start_id:null},o=this.stay_realtime?"since_id":"from_id";return s[o]=i.since_id,n=e.extend({},n),this.first&&(n=e.extend(n.initial||{},n),delete n.initial),s=e.extend(s,n),this.cursorable()||delete s.since_id,t.load(s,function(e){r.enabled()&&(e&&e.length>0&&(i.since_id=e[0].entity_id,i.start_id||(i.start_id=e[e.length-1].entity_id)),r.callback(e),s.timeframe&&i.first&&i.stop(),i.first=!1)},r.errback),this},r.prototype.batch=function(e){return this.data(r.createEnumerator(e,!1))},r.prototype.each=function(e){return this.data(r.createEnumerator(e,!0))},r.prototype.queue=function(e){var t=new n(this);return t.next(e),this},r.prototype.more=function(t,n){var r=this,i=function(){r.object.load(e.extend({start_id:r.start_id,since_id:null},r.opts),function(e){e.length>0&&(r.start_id=e[e.length-1].entity_id,r.since_id||(r.since_id=e[0].entity_id)),t.call(r,e)},function(){typeof n=="function"&&n()})};return i(),this},r.prototype.cursorable=function(){return!(t.failure_mode||this.failure_mode||this.hail_mary_mode)},r.prototype.filter_newer=function(e){return e=r.filter_newer(e,this.newest_timestamp),e&&e.length>0&&(this.newest_timestamp=e[0].queued_at),e},r.prototype.poke=function(){return this},r.createEnumerator=function(t,n){return n?function(n){n&&n.length>0&&e.step_through(n,[t],this)}:function(e){e&&e.length>0&&t.call(this,e)}},r.filter_newer=function(e,t){var n="queued_at";if(e&&e.length>0){var r=this.limit||Infinity;if(t)if(e[0][n]<=t)e=[];else if(e[e.length-1][n]>t)e.length>r&&e.splice(this.limit,e.length-r);else{var i=[];for(var s=0,o=e.length;s<o&&i.length<r;s++){var u=e[s];if(!(u[n]>t))break;i.push(u)}e=i}else e.length>r&&e.splice(this.limit,e.length-r)}return e},r}),n("massrel-js/meta_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.meta(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),n("massrel-js/top_things_poller",["./helpers","./generic_poller"],function(e,t){function u(e,n){n.thing===undefined&&(n.thing="hashtags"),n.start!==undefined&&(n.start=o(n.start)),n.finish!==undefined&&(n.finish=o(n.finish)),n.resolution!==undefined&&(n.resolution=o(n.resolution)),t.apply(this,arguments)}var n=function(){return Math.floor((new Date).getTime()/1e3)},r=function(e,t){var n=t-e;return n%300!==0&&(n=Math.max(1,Math.round(n/300))*300),n},i=/[smh]/,s={s:1,m:60,h:3600},o=function(t){if(e.is_number(t))return t;var n=window.parseInt(t);if(!n&&n!==0)return 0;t=t.toLowerCase();var r=i.exec(t);return r===null||s[r]===undefined?n:n*s[r]};return e.extend(u.prototype,t.prototype),u.prototype.fetch=function(e,t,i){return t.start!==undefined&&t.start<=0&&(t.start=n()+t.start),t.finish!==undefined&&t.finish<=0&&(t.finish=n()+t.finish),t.resolution===undefined&&(t.resolution=r(t.start,t.finish)),e.topThings(t,i.callback,i.errback),this},u.mostRecentBucket=function(e){if(e.data!==undefined&&e.data.length>0){for(var t=e.data.length-1;t>=0;t--)if(e.data[t].things&&e.data[t].things.length>0)return e.data[t];if(t===-1)return e.data[e.data.length-1]}return null},u.prototype.each=u.prototype.data,u}),n("massrel-js/stream_keyword_insights",["./helpers","./generic_poller"],function(e,t){function r(e,t){this.stream=e,this.defaults=t||{}}var n=encodeURIComponent;return r.prototype.url=function(){return this.stream.keyword_insights_url()},r.prototype.fetch=function(t,n,r){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var i=this.params(t);return e.request_factory(this.url(),i,"_",this,function(e){typeof n=="function"&&n.apply(this,arguments)},r),this},r.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},r.prototype.params=function(e){e=e||{};var t=[];return e.topics&&t.push(["topics","1"]),"start"in e&&t.push(["start",e.start]),"finish"in e&&t.push(["finish",e.finish]),e.resolution&&t.push(["resolution",e.resolution]),t},r}),n("massrel-js/stream_activity",["./helpers","./generic_poller"],function(e,t){function r(e,t){this.stream=e,this.defaults=t||{}}var n=encodeURIComponent;r.prototype.url=function(){return e.api_url("/"+n(this.stream.account)+"/"+n(this.stream.stream_name)+"/activity.json")},r.prototype.fetch=function(t,n,r){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var i=this.params(t);return e.request_factory(this.url(),i,"_",this,function(r){if(r&&(!t.verbose||t.verbose==="0")&&e.is_array(r.activity)){var i=r.activity;for(var s=0,o=i.length;s<o;s++){var u=r.start+r.period_size*s;i[s]=e.extend(i[s],{start:u,finish:Math.min(u+r.period_size,r.finish)})}}typeof n=="function"&&n.apply(this,arguments)},r),this},r.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},r.prototype.params=function(t){t=t||{};var n=[];return t.view?n.push(["view",t.view]):t.topic&&n.push(["topic",t.topic]),e.timeParam(t.start,"start",n,!0),e.timeParam(t.finish,"finish",n,!0),"periods"in t&&n.push(["periods",t.periods]),t.resolution&&n.push(["resolution",t.resolution]),"tz_offset"in t&&n.push(["tz_offset",t.tz_offset]),t.encode&&n.push(["encode",t.encode]),n.push(["verbose",0]),n};var i=function(e,t,n){r.prototype[e]=function(){return this.defaults[t]=n,this}};return i("approved","view","approved"),i("pending","view","pending"),i("rejected","view","rejected"),i("minutes","resolution","1m"),i("ten_minutes","resolution","10m"),i("hours","resolution","1h"),i("days","resolution","1d"),r}),n("massrel-js/stream",["./helpers","./poller","./meta_poller","./top_things_poller","./stream_keyword_insights","./stream_activity"],function(e,t,n,r,i,s){function u(){var e=arguments.length===1?arguments[0].split("/"):arguments;this.account=e[0],this.stream_name=e[1],this._enumerators=[]}var o=encodeURIComponent;return u.prototype.stream_url=function(){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+".json")},u.prototype.meta_url=function(){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/meta.json")},u.prototype.top_things_url=function(t){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/top_"+t+".json")},u.prototype.keyword_insights_url=function(t){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/keyword_insights.json")},u.prototype.load=function(t,n,r){t=e.extend(t||{},{});var i=this.buildParams(t);return e.request_factory(this.stream_url(),i,"_",this,n||this._enumerators,r),this},u.prototype.buildParams=function(t){t=t||{};var n=[];return t.limit&&n.push(["limit",t.limit]),t.since_id?n.push(["since_id",t.since_id]):t.from_id?n.push(["from_id",t.from_id]):(t.start_id||t.start)&&n.push(["start",t.start_id||t.start]),t.replies&&n.push(["replies","1"]),t.geo_hint&&n.push(["geo_hint","1"]),t.from&&n.push(["from",t.from]),t.keywords&&n.push(["keywords",t.keywords]),t.network&&n.push(["network",t.network]),t.timeline_search&&n.push(["timeline_search","1"]),t.page_links&&n.push(["page_links","1"]),t.klout&&n.push(["klout","1"]),t.timeframe&&(e.timeParam(t.timeframe.start,"timeframe[start]",n),e.timeParam(t.timeframe.finish,"timeframe[finish]",n)),n},u.prototype.each=function(e){return this._enumerators.push(e),this},u.prototype.poller=function(e){return new t(this,e)},u.prototype.meta=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildMetaParams(t);return e.request_factory(this.meta_url(),i,"meta_",this,n,r),this},u.prototype.buildMetaParams=function(e){e=e||{};var t=[];return e.disregard&&t.push(["disregard",e.disregard]),e.num_minutes&&t.push(["num_minutes",e.num_minutes]),e.num_hours&&t.push(["num_hours",e.num_hours]),e.num_days&&t.push(["num_days",e.num_days]),e.num_trends&&t.push(["num_trends",e.num_trends]),e.num_links&&t.push(["num_links",e.num_links]),e.num_hashtags&&t.push(["num_hashtags",e.num_hashtags]),e.num_contributors&&t.push(["num_contributors",e.num_contributors]),e.top_periods&&t.push(["top_periods",e.top_periods]),e.top_periods_relative&&t.push(["top_periods_relative",e.top_periods_relative]),e.top_count&&t.push(["top_count",e.top_count]),e.finish&&t.push(["finish",e.finish]),e.networks&&t.push(["networks","1"]),t},u.prototype.metaPoller=function(e){return new n(this,e)},u.prototype.keywordInsights=function(e){return new i(this,e)},u.prototype.topThings=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildTopThingsParams(t);return e.request_factory(this.top_things_url(t.thing),i,"top_things_",this,n,r),this},u.prototype.buildTopThingsParams=function(t){t=t||{};var n=[];if(t.resolution){var r;e.is_number(t.resolution)?r=t.resolution+"s":r=t.resolution,n.push(["resolution",r])}return t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),t.limit&&n.push(["limit",t.limit]),n},u.prototype.topThingsPoller=function(e){return new r(this,e)},u.prototype.activity=function(e){return new s(this,e)},u}),n("massrel-js/account",["./helpers","./meta_poller"],function(e,t){function r(e){this.user=e}var n=encodeURIComponent;return r.prototype.meta_url=function(){return e.api_url("/"+n(this.user)+".json")},r.prototype.meta=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildMetaParams(t);return e.request_factory(this.meta_url(),i,"meta_",this,n,r),this},r.prototype.buildMetaParams=function(t){t=t||{};var n=[];t.quick_stats&&n.push(["quick_stats","1"]);if(t.streams){var r=e.is_array(t.streams)?t.streams:[t.streams];n.push(["streams",r.join(",")])}return t.num_minutes&&n.push(["num_minutes",t.num_minutes]),t.num_trends&&n.push(["num_trends",t.num_trends]),t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),n},r.prototype.metaPoller=function(e){return new t(this,e)},r.prototype.toString=function(){return this.user},r}),n("massrel-js/context",["./helpers"],function(e){function t(e){this.status=e,this.source={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},this.known=!1,this.intents=!0}return t.create=function(n,r){n=n||{};var i=new t(n);return r=e.extend(r||{},{intents:!0,retweeted_by:!0}),i.intents=r.intents,typeof i.source[n.network]!="undefined"&&(i.source[n.network]=i.known=!0,i.sourceName=n.network),n.network==="google_plus"&&(i.source.google=i.known=!0,i.sourceName="google"),n.network==="massrelevance"&&(i.source.message=i.known=!0,i.sourceName="message"),i.source.twitter&&n.retweeted_status&&r.retweeted_by&&(i.retweet=!0,i.retweeted_by_user=n.user,i.status=n.retweeted_status),i},t.prototype.getPhotoUrl=function(){if(this.photo_url!==undefined)return this.photo_url;var e=!1;if(this.status&&this.known)if(this.source.twitter)if(this.status.entities.media&&this.status.entities.media.length){var t=this.status.entities.media[0];e={url:t.media_url,width:t.sizes.medium.w,height:t.sizes.medium.h,link_url:t.url||t.expanded_url}}else this.status.entities.urls&&this.status.entities.urls.length&&(e={url:this.status.entities.urls[0].expanded_url||this.status.entities.urls[0].url});else this.source.facebook&&(this.status.type&&this.status.type==="photo"||this.status.kind&&this.status.kind==="photo")?e={url:this.status.picture.replace(/_[st]./,"_n.")}:this.source.google&&this.status.object.attachments.length&&this.status.object.attachments[0].objectType==="photo"?e={url:this.status.object.attachments[0].fullImage.url}:this.source.instagram&&this.status.type==="image"&&(e={url:this.status.images.standard_resolution.url});return this.photo_url=e,e},t}),n("massrel-js/compare_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),n("massrel-js/compare",["./helpers","./compare_poller"],function(e,t){function n(t){e.is_array(t)?this.streams=t.slice(0):typeof t=="string"?this.streams=[t]:this.streams=[]}return n.prototype.compare_url=function(){return e.api_url("/compare.json")},n.prototype.buildParams=function(e){var t=[];return e=e||{},e.streams&&t.push(["streams",e.streams]),(e.target||e.target>=0)&&t.push("target",e.target.toString()),t},n.prototype.load=function(t,n,r){typeof t=="function"&&(r=n,n=t,t=null);var i=this.buildParams(e.extend({streams:this.streams},t||{}));return e.request_factory(this.compare_url(),i,"meta_",this,n,r),this},n.prototype.poller=function(e){return new t(this,e)},n}),n("massrel-js/intents",["./helpers"],function(e){var t={base_url:"https://twitter.com/intent/",params:{text:"(string): default text, for tweet/reply",url:"(string): prefill url, for tweet/reply",hashtags:"(string): hashtag (or list with ,) without #, for tweet/reply",related:"(string): screen name (or list with ,) without @, available for all",in_reply_to:"(number): tweet id, only for reply",via:"(string): screen name without @, tweet/reply",tweet_id:"(number): tweet id, for retweet and favorite",screen_name:"(string): only for user/profile",user_id:"(number): only for user/profile",original_referer:'(string): url to display with related ("www.yahoo.com suggests you follow:")'},original_referer:window.top!==window.self&&document.referrer||null};return t.url=function(n,r){r=r||{},r.original_referer===undefined&&t.original_referer&&(r.original_referer=t.original_referer),r.original_referer&&r.original_referer.indexOf("http://")!==0&&r.original_referer.indexOf("https://")!==0&&(r.original_referer="http://"+r.original_referer);var i=[];for(var s in r)i.push([s,r[s]]);return t.base_url+encodeURIComponent(n)+"?"+e.to_qs(i)},t.tweet=function(e){return t.url("tweet",e)},t.reply=function(e,n){return n=n||{},n.in_reply_to=e,t.tweet(n)},t.retweet=function(e,n){return n=n||{},n.tweet_id=e,t.url("retweet",n)},t.favorite=function(e,n){return n=n||{},n.tweet_id=e,t.url("favorite",n)},t.user=function(e,n){return n=n||{},/^\d+$/.test(e+"")?n.user_id=e:n.screen_name=e,t.url("user",n)},t.profile=t.user,t}),n("massrel-js/massrel",["./globals","./helpers","./stream","./account","./stream_keyword_insights","./stream_activity","./generic_poller","./generic_poller_cycle","./poller","./meta_poller","./top_things_poller","./poller_queue","./context","./compare","./compare_poller","./intents"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){e.Stream=n,e.Account=r,e.StreamKeywordInsights=i,e.StreamActivity=s,e.GenericPoller=o,e.GenericPollerCycle=u,e.Poller=a,e.MetaPoller=f,e.TopThingsPoller=l,e.PollerQueue=c,e.Context=h,e.Compare=p,e.ComparePoller=d,e.helpers=t,e.intents=v;var m=t.parse_params();return m["massrel[host]"]&&(e.host=m["massrel[host]"]),e}),n("massrel-js",["massrel-js/massrel"],function(e){return e}),n("embedly/js/main",["jquery","massrel-js"],function(e,t){function o(e){this.data={key:"fd577f7497bf11e0b95d4040d3dc5c07",secure:n,url:e,maxwidth:"500"}}var n=location.protocol==="https:",r="embedly.massrelevance.com",i="d1gbi9ec0ujnws.cloudfront.net",s="//"+(n?i:r)+"/1/";return o.prototype.task=function(n,r){var i=this,o=new e.Deferred;return t.helpers.request_factory(s+n,[["key",this.data.key],["secure",this.data.secure?"true":"false"],["url",this.data.url],["maxwidth",this.data.maxwidth]],"_",this,function(e){o.resolve(e),e&&typeof r=="function"&&r(e)},function(){o.reject()}),o.promise()},o.prototype.oembed=function(e){return this.task("oembed",e)},o.prototype.preview=function(e){return this.task("preview",e)},function(e){return new o(e)}}),n("embedly/index",["./js/main"],function(e){return e}),n("embedly",["embedly/index"],function(e){return e}),n("media-meta/js/main",["require","lodash","embedly","q","massrel-js"],function(e){var t=e("lodash"),n=e("embedly"),r=e("q"),i=e("massrel-js");r.stopUnhandledRejectionTracking();var s={promise:function(e,n){var i,s;return n=t.extend({},o,n),!e||!t.isFunction(S[e.sourceName])?(i=r.defer(),i.reject(),s=i.promise):s=S[e.sourceName](e,n),s},embedlyPromise:function(e,i){var s=r.defer();if(i&&!i.use_embedly)s.reject();else{var o=[];n(e).preview().then(function(e){if(!e.error_code&&e.object){var n=y(e.object.type),r=b(e.provider_name);if(n.photo||n.video){var u={};e.images&&e.images.length&&t.each(c,function(t){u[t]=e.images[0]});var a={type:n,provider:r,providerName:l[e.provider_name]||e.provider_name,photo_urls:u};n.video&&e.object.html&&(a.embed_html=e.object.html,a.provider.vine&&(a.embed_url=E(e.url+"/raw",e.images[0].url,"vine",i))),o.push(a)}}o.length===0?s.reject():s.resolve(o)}).fail(function(){s.reject()})}return s.promise}},o={autoplay_video:!1,prefetch:!1,loop_video:!1,muted:!1,secure:!1,use_embedly:!0},u={link:!1,video:!1,photo:!1},a={image:"photo"},f={vine:!1,twitter:!1,facebook:!1,google:!1,getglue:!1,youtube:!1,instagram:!1,vimeo:!1},l={YouTube:"youtube",Vine:"vine",Twitter:"twitter",Facebook:"facebook",GetGlue:"getglue","Google+":"google",Instagram:"instagram",Vimeo:"vimeo"},c=["huge","large","medium","small","thumb"],h={huge:"_n.",large:"_n.",medium:"_a.",small:"_s.",thumb:"_t."},p={huge:"w1500-h1500",large:"w800-h800",medium:"w400-h400",small:"w200-h200",thumb:"w75-h75"},d={huge:"large",large:"large",medium:"medium",small:"small",thumb:"thumb"},v={huge:"standard_resolution",large:"standard_resolution",medium:"low_resolution",small:"thumbnail",thumb:"thumbnail"},m=/https?:\/\/[^/]*googleusercontent.com\/.*\/w[0-9]+-h[0-9]+\/.*/,g=/https?:\/\/[^/]*fbcdn.*\/[^/]*_[nast]\.[a-zA-Z]+$/,y=function(e,n){e=a[e]||e;var r=t.extend({},u);return t.has(r,e)&&(r[e]=!0),n&&n.sourceNetwork&&n.sourceNetwork.facebook&&n.picture&&(r.photo=!0),r},b=function(e){e=l[e]||e;var n=t.extend({},f);return t.has(n,e)&&(n[e]=!0),n},w=function(e){return e&&e.user?"https://twitter.com/"+e.user.screen_name+"/status/"+e.id_str:""},E=function(e,t,n,r){var s="//up.massrelevance.com/massrel-products/player/index.html?",o=i.helpers.to_qs([["mp4",e],["poster",t],["schema",n],["prefetch",r.autoplay_video||r.prefetch],["autoplay",r.autoplay_video],["loop",r.loop_video],["muted",r.muted]]);return s+o},S={twitter:function(e,n){var i=!1,o=!1,u=[],a=r.defer();if(e.entities){e.entities.media&&e.entities.media.length&&(i=!0,t.each(e.entities.media,function(r){var i={},s;t.each(d,function(e,t){s=r.sizes[e],i[t]={url:(n.secure?r.media_url_https:r.media_url)+":"+e,short_url:r.url,width:s.w,height:s.h}}),u.push({provider:b("twitter"),providerName:"twitter",type:y(r.type),link:w(e),photo_urls:i})}));if(e.entities.urls&&e.entities.urls.length){i=!0,o=!0;var f=[];t.each(e.entities.urls,function(e){var t=s.embedlyPromise(e.expanded_url,n);f.push(t),t.then(function(e){u=u.concat(e)})}),r.allSettled(f).then(function(){u.length===0?a.reject():(t.each(u,function(t){t.link=w(e)}),a.resolve(u))})}}return o||(!i||u.length===0?a.reject():a.resolve(u)),a.promise},facebook:function(e){var n=r.defer(),i=y(e.type||e.kind,e);e.kind==="comment"&&e.attachment&&e.attachment.type==="photo"&&(e.picture=e.attachment.media.image.src,i.photo=!0);if(i.photo||i.link){var s={};if(e.picture){var o=g.test(e.picture);t.each(h,function(t,n){s[n]={url:o?e.picture.replace(/_[nast]\./,t):e.picture}})}n.resolve([{provider:b("facebook"),providerName:"facebook",type:i,photo_urls:s,link:e.link,name:e.name,caption:e.caption,description:e.description}])}else n.reject();return n.promise},instagram:function(e,n){var i=r.defer();if(e.images){var s=y(e.type);if(s.photo||s.video){var o={};t.each(c,function(t){o[t]=e.images[v[t]],o[t].url=o[t].url.replace(/^https?:/,"")});var u=b("instagram"),a="instagram";s.photo?i.resolve([{provider:u,providerName:a,type:s,link:e.link,photo_urls:o}]):s.video&&i.resolve([{provider:u,providerName:a,photo_urls:o,link:e.link,video_url:e.videos.standard_resolution.url,embed_url:E(e.videos.standard_resolution.url,e.images.standard_resolution.url,"instagram",n),type:s}])}}else i.reject();return i.promise},google:function(e){var n=r.defer(),i=[];if(e.object&&e.object.attachments&&e.object.attachments.length){var s,o,u;t.each(e.object.attachments,function(n){s=y(n.objectType);if(!s.photo)return;u=m.test(n.image.url),o={},t.each(c,function(e){u?o[e]=t.extend({},n.image,{url:n.image.url.replace(/w[0-9]+-h[0-9]+/,p[e])}):o[e]=t.extend({},n.fullImage,{url:n.fullImage.url})}),i.push({provider:b("google"),providerName:"google",type:s,link:e.url,photo_urls:o})})}return i.length===0?n.reject():n.resolve(i),n.promise},getglue:function(e){var n=r.defer(),i=[];if(e.object){var s=y(e.object.objectType),o={},u=b("getglue"),a="getglue";s.photo?(t.each(c,function(t){o[t]={url:e.object.link}}),i.push({provider:u,providerName:a,type:s,photo_urls:o,link:e.object.link})):s.video&&(t.each(c,function(t){o[t]={url:e.object.image}}),i.push({provider:u,providerName:a,type:s,photo_urls:o,link:e.object.link}))}return i.length>0?n.resolve(i):n.reject(),n.promise}};return s}),n("media-meta/index",["./js/main"],function(e){return e}),n("media-meta",["media-meta/index"],function(e){return e}),n("massrel-js-backbone/MediaCollection",["./backbone","./MediaModel","media-meta"],function(e,t,n){return e.Collection.extend({model:t})}),function(e){function X(e,t){return function(n){return Y(e.call(this,n),t)}}function V(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function $(){}function J(e){lt(e),Q(this,e)}function K(e){var t=it(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._input=e,this._milliseconds=+f+a*1e3+u*6e4+o*36e5,this._days=+s+i*7,this._months=+r+n*12,this._data={},this._bubble()}function Q(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function G(e){return e<0?Math.ceil(e):Math.floor(e)}function Y(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function Z(e,t,n,i){var s=t._milliseconds,o=t._days,u=t._months,a,f;s&&e._d.setTime(+e._d+s*n);if(o||u)a=e.minute(),f=e.hour();o&&e.date(e.date()+o*n),u&&e.month(e.month()+u*n),s&&!i&&r.updateOffset(e);if(o||u)e.minute(a),e.hour(f)}function et(e){return Object.prototype.toString.call(e)==="[object Array]"}function tt(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function nt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&ot(e[o])!==ot(t[o]))&&s++;return s+i}function rt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=F[e]||I[t]||t}return e}function it(e){var t={},n,r,i;for(r in e)e.hasOwnProperty(r)&&(n=rt(r),n&&(t[n]=e[r]));return t}function st(t){var n,i;if(t.indexOf("week")===0)n=7,i="day";else{if(t.indexOf("month")!==0)return;n=12,i="month"}r[t]=function(s,o){var u,a,f=r.fn._lang[t],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var t=r().utc().set(i,e);return f.call(r.fn._lang,t,s||"")};if(o!=null)return a(o);for(u=0;u<n;u++)l.push(a(u));return l}}function ot(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function ut(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function at(e){return ft(e)?366:365}function ft(e){return e%4===0&&e%100!==0||e%400===0}function lt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[a]<0||e._a[a]>11?a:e._a[f]<1||e._a[f]>ut(e._a[u],e._a[a])?f:e._a[l]<0||e._a[l]>23?l:e._a[c]<0||e._a[c]>59?c:e._a[h]<0||e._a[h]>59?h:e._a[p]<0||e._a[p]>999?p:-1,e._pf._overflowDayOfYear&&(t<u||t>f)&&(t=f),e._pf.overflow=t)}function ct(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ht(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function pt(e){return e?e.toLowerCase().replace("_","-"):e}function dt(e,t){return t.abbr=e,d[e]||(d[e]=new $),d[e].set(t),d[e]}function vt(e){delete d[e]}function mt(e){var n=0,i,s,o,u,a=function(e){if(!d[e]&&v)try{t("./lang/"+e)}catch(n){}return d[e]};if(!e)return r.fn._lang;if(!et(e)){s=a(e);if(s)return s;e=[e]}while(n<e.length){u=pt(e[n]).split("-"),i=u.length,o=pt(e[n+1]),o=o?o.split("-"):null;while(i>0){s=a(u.slice(0,i).join("-"));if(s)return s;if(o&&o.length>=i&&nt(u,o,!0)>=i-1)break;i--}n++}return r.fn._lang}function gt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function yt(e){var t=e.match(b),n,r;for(n=0,r=t.length;n<r;n++)z[t[n]]?t[n]=z[t[n]]:t[n]=gt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function bt(e,t){return e.isValid()?(t=wt(t,e.lang()),q[t]||(q[t]=yt(t)),q[t](e)):e.lang().invalidDate()}function wt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;w.lastIndex=0;while(n>=0&&w.test(e))e=e.replace(w,r),w.lastIndex=0,n-=1;return e}function Et(e,t){var n;switch(e){case"DDDD":return x;case"YYYY":case"GGGG":case"gggg":return T;case"YYYYY":case"GGGGG":case"ggggg":return N;case"S":case"SS":case"SSS":case"DDD":return S;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return k;case"a":case"A":return mt(t._l)._meridiemParse;case"X":return O;case"Z":case"ZZ":return L;case"T":return A;case"SSSS":return C;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return E;default:return n=new RegExp(At(Lt(e.replace("\\","")),"i")),n}}function St(e){var t=(L.exec(e)||[])[0],n=(t+"").match(H)||["-",0,0],r=+(n[1]*60)+ot(n[2]);return n[0]==="+"?-r:r}function xt(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":t!=null&&(i[a]=ot(t)-1);break;case"MMM":case"MMMM":r=mt(n._l).monthsParse(t),r!=null?i[a]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(i[f]=ot(t));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=ot(t));break;case"YY":i[u]=ot(t)+(ot(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":i[u]=ot(t);break;case"a":case"A":n._isPm=mt(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[l]=ot(t);break;case"m":case"mm":i[c]=ot(t);break;case"s":case"ss":i[h]=ot(t);break;case"S":case"SS":case"SSS":case"SSSS":i[p]=ot(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=St(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function Tt(e){var t,n,i=[],s,o,h,p,d,v,m,g;if(e._d)return;s=Ct(e),e._w&&e._a[f]==null&&e._a[a]==null&&(h=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:e._a[u]==null?r().weekYear():e._a[u]},p=e._w,p.GG!=null||p.W!=null||p.E!=null?d=It(h(p.GG),p.W||1,p.E,4,1):(v=mt(e._l),m=p.d!=null?Ht(p.d,v):p.e!=null?parseInt(p.e,10)+v._week.dow:0,g=parseInt(p.w,10)||1,p.d!=null&&m<v._week.dow&&g++,d=It(h(p.gg),g,m,v._week.doy,v._week.dow)),e._a[u]=d.year,e._dayOfYear=d.dayOfYear),e._dayOfYear&&(o=e._a[u]==null?s[u]:e._a[u],e._dayOfYear>at(o)&&(e._pf._overflowDayOfYear=!0),n=Pt(o,0,e._dayOfYear),e._a[a]=n.getUTCMonth(),e._a[f]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=s[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];i[l]+=ot((e._tzm||0)/60),i[c]+=ot((e._tzm||0)%60),e._d=(e._useUTC?Pt:Dt).apply(null,i)}function Nt(e){var t;if(e._d)return;t=it(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Tt(e)}function Ct(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function kt(e){e._a=[],e._pf.empty=!0;var t=mt(e._l),n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=wt(e._f,t).match(b)||[];for(r=0;r<s.length;r++)o=s[r],i=(Et(o,e).exec(n)||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),z[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),xt(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-f,n.length>0&&e._pf.unusedInput.push(n),e._isPm&&e._a[l]<12&&(e._a[l]+=12),e._isPm===!1&&e._a[l]===12&&(e._a[l]=0),Tt(e),lt(e)}function Lt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function At(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ot(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=Q({},e),ct(t),t._f=e._f[i],kt(t);if(!ht(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}Q(e,n||t)}function Mt(e){var t,n=e._i,r=M.exec(n);if(r){e._pf.iso=!0;for(t=4;t>0;t--)if(r[t]){e._f=D[t-1]+(r[6]||" ");break}for(t=0;t<4;t++)if(P[t][1].exec(n)){e._f+=P[t][0];break}L.exec(n)&&(e._f+="Z"),kt(e)}else e._d=new Date(n)}function _t(t){var n=t._i,r=m.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?Mt(t):et(n)?(t._a=n.slice(0),Tt(t)):tt(n)?t._d=new Date(+n):typeof n=="object"?Nt(t):t._d=new Date(n)}function Dt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Pt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Ht(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Bt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function jt(e,t,n){var r=s(Math.abs(e)/1e3),i=s(r/60),o=s(i/60),u=s(o/24),a=s(u/365),f=r<45&&["s",r]||i===1&&["m"]||i<45&&["mm",i]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",s(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Bt.apply({},f)}function Ft(e,t,n){var i=n-t,s=n-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=r(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function It(e,t,n,r,i){var s=(new Date(Date.UTC(e,0))).getUTCDay(),o,u;return n=n!=null?n:i,o=i-s+(s>r?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:at(e-1)+u}}function qt(e){var t=e._i,n=e._f;return typeof e._pf=="undefined"&&ct(e),t===null?r.invalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=mt().preparse(t)),r.isMoment(t)?(e=Q({},t),e._d=new Date(+t._d)):n?et(n)?Ot(e):kt(e):_t(e),new J(e))}function Rt(e,t){r.fn[e]=r.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),r.updateOffset(this),this):this._d["get"+n+t]()}}function Ut(e){r.duration.fn[e]=function(){return this._data[e]}}function zt(e,t){r.duration.fn["as"+e]=function(){return+this/t}}function Wt(e){var t=!1,n=r;if(typeof ender!="undefined")return;e?this.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:this.moment=r}var r,i="2.4.0",s=Math.round,o,u=0,a=1,f=2,l=3,c=4,h=5,p=6,d={},v=typeof module!="undefined"&&module.exports,m=/^\/?Date\((\-?\d+)/i,g=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,y=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,b=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,w=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,E=/\d\d?/,S=/\d{1,3}/,x=/\d{3}/,T=/\d{1,4}/,N=/[+\-]?\d{1,6}/,C=/\d+/,k=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,L=/Z|[\+\-]\d\d:?\d\d/i,A=/T/i,O=/[\+\-]?\d+(\.\d{1,3})?/,M=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,_="YYYY-MM-DDTHH:mm:ssZ",D=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],P=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],H=/([\+\-]|\d\d)/gi,B="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),j={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},F={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},I={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},q={},R="DDD w W M D d".split(" "),U="M D H h m s w W".split(" "),z={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return Y(this.year()%100,2)},YYYY:function(){return Y(this.year(),4)},YYYYY:function(){return Y(this.year(),5)},gg:function(){return Y(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return Y(this.weekYear(),5)},GG:function(){return Y(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return Y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ot(this.milliseconds()/100)},SS:function(){return Y(ot(this.milliseconds()/10),2)},SSS:function(){return Y(this.milliseconds(),3)},SSSS:function(){return Y(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+Y(ot(e/60),2)+":"+Y(ot(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+Y(ot(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},W=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(R.length)o=R.pop(),z[o+"o"]=V(z[o],o);while(U.length)o=U.pop(),z[o+o]=X(z[o],2);z.DDDD=X(z.DDD,3),Q($.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;this._monthsParse||(this._monthsParse=[]);for(t=0;t<12;t++){this._monthsParse[t]||(n=r.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[t].test(e))return t}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=r([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Ft(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),r=function(t,n,r,i){return typeof r=="boolean"&&(i=r,r=e),qt({_i:t,_f:n,_l:r,_strict:i,_isUTC:!1})},r.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s=qt({_useUTC:!0,_isUTC:!0,_l:r,_i:t,_f:n,_strict:i}).utc(),s},r.unix=function(e){return r(e*1e3)},r.duration=function(e,t){var n=r.isDuration(e),i=typeof e=="number",s=n?e._input:i?{}:e,o=null,u,a,d,v,m;return i?t?s[t]=e:s.milliseconds=e:(o=g.exec(e))?(u=o[1]==="-"?-1:1,s={y:0,d:ot(o[f])*u,h:ot(o[l])*u,m:ot(o[c])*u,s:ot(o[h])*u,ms:ot(o[p])*u}):!(o=y.exec(e))||(u=o[1]==="-"?-1:1,d=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*u},s={y:d(o[2]),M:d(o[3]),d:d(o[4]),h:d(o[5]),m:d(o[6]),s:d(o[7]),w:d(o[8])}),a=new K(s),n&&e.hasOwnProperty("_lang")&&(a._lang=e._lang),a},r.version=i,r.defaultFormat=_,r.updateOffset=function(){},r.lang=function(e,t){var n;return e?(t?dt(pt(e),t):t===null?(vt(e),e="en"):d[e]||mt(e),n=r.duration.fn._lang=r.fn._lang=mt(e),n._abbr):r.fn._lang._abbr},r.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),mt(e)},r.isMoment=function(e){return e instanceof J},r.isDuration=function(e){return e instanceof K};for(o=W.length-1;o>=0;--o)st(W[o]);r.normalizeUnits=function(e){return rt(e)},r.invalid=function(e){var t=r.utc(NaN);return e!=null?Q(t._pf,e):t._pf.userInvalidated=!0,t},r.parseZone=function(e){return r(e).parseZone()},Q(r.fn=J.prototype,{clone:function(){return r(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return bt(r(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return ht(this)},isDSTShifted:function(){return this._a?this.isValid()&&nt(this._a,(this._isUTC?r.utc(this._a):r(this._a)).toArray())>0:!1},parsingFlags:function(){return Q({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=bt(this,e||r.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return typeof e=="string"?n=r.duration(+t,e):n=r.duration(e,t),Z(this,n,1),this},subtract:function(e,t){var n;return typeof e=="string"?n=r.duration(+t,e):n=r.duration(e,t),Z(this,n,-1),this},diff:function(e,t,n){var i=this._isUTC?r(e).zone(this._offset||0):r(e).local(),s=(this.zone()-i.zone())*6e4,o,u;return t=rt(t),t==="year"||t==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-r(this).startOf("month")-(i-r(i).startOf("month")))/o,u-=(this.zone()-r(this).startOf("month").zone()-(i.zone()-r(i).startOf("month").zone()))*6e4/o,t==="year"&&(u/=12)):(o=this-i,u=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-s)/864e5:t==="week"?(o-s)/6048e5:o),n?u:G(u)},from:function(e,t){return r.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(r(),e)},calendar:function(){var e=this.diff(r().zone(this.zone()).startOf("day"),"days",!0),t=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return ft(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Ht(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t=this._isUTC?"UTC":"",n;if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return n=this.date(),this.date(1),this._d["set"+t+"Month"](e),this.date(Math.min(n,this.daysInMonth())),r.updateOffset(this),this}return this._d["get"+t+"Month"]()},startOf:function(e){e=rt(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),this},endOf:function(e){return e=rt(e),this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t=typeof t!="undefined"?t:"millisecond",+this.clone().startOf(t)>+r(e).startOf(t)},isBefore:function(e,t){return t=typeof t!="undefined"?t:"millisecond",+this.clone().startOf(t)<+r(e).startOf(t)},isSame:function(e,t){return t=typeof t!="undefined"?t:"millisecond",+this.clone().startOf(t)===+r(e).startOf(t)},min:function(e){return e=r.apply(null,arguments),e<this?this:e},max:function(e){return e=r.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return e==null?this._isUTC?t:this._d.getTimezoneOffset():(typeof e=="string"&&(e=St(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,t!==e&&Z(this,r.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=r(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return ut(this.year(),this.month())},dayOfYear:function(e){var t=s((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return e==null?t:this.add("d",e-t)},weekYear:function(e){var t=Ft(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Ft(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=Ft(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=rt(e),this[e]()},set:function(e,t){return e=rt(e),typeof this[e]=="function"&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=mt(t),this)}});for(o=0;o<B.length;o++)Rt(B[o].toLowerCase().replace(/s$/,""),B[o]);Rt("year","FullYear"),r.fn.days=r.fn.day,r.fn.months=r.fn.month,r.fn.weeks=r.fn.week,r.fn.isoWeeks=r.fn.isoWeek,r.fn.toJSON=r.fn.toISOString,Q(r.duration.fn=K.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=G(e/1e3),r.seconds=i%60,s=G(i/60),r.minutes=s%60,o=G(s/60),r.hours=o%24,t+=G(o/24),r.days=t%30,n+=G(t/30),r.months=n%12,u=G(n/12),r.years=u},weeks:function(){return G(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+ot(this._months/12)*31536e6},humanize:function(e){var t=+this,n=jt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=r.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=r.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=rt(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=rt(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:r.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(o in j)j.hasOwnProperty(o)&&(zt(o,j[o]),Ut(o.toLowerCase()));zt("Weeks",6048e5),r.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},r.lang("en",{ordinal:function(e){var t=e%10,n=ot(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),v?(module.exports=r,Wt(!0)):typeof n=="function"&&n.amd?n("moment",["require","exports","module"],function(t,n,i){return i.config().noGlobal!==!0&&Wt(i.config().noGlobal===e),r}):Wt()}.call(this),n("massrel-js-backbone/StatusModel",["require","./backbone","./MediaCollection","lodash","moment"],function(e){var t=e("./backbone"),n=e("./MediaCollection"),r=e("lodash"),i=e("moment"),s=new RegExp("(https?:)?//i\\.embed\\.ly/\\d+/image"),o={minute:i.duration(1,"minute").asMilliseconds(),hour:i.duration(1,"hour").asMilliseconds(),day:i.duration(1,"day").asMilliseconds(),week:i.duration(1,"week").asMilliseconds(),month:i.duration(1,"month").asMilliseconds()};return t.Model.extend({idAttribute:"_id",defaults:function(){return{retweet:!1,formattedDate:"",relativeDateFormat:"display",formattedText:"",klout:null,formattedStory:"",config:{},place:null,media:new n}},constructor:function(e,n){n=n||{},n.parse=!0,t.Model.call(this,e,n),this.generateFormattedDates()},embedlyImageProxyUrl:function(e){return s.test(e)||(e="//i.embed.ly/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&url="+window.encodeURIComponent(e)),e},parse:function(e){return e._id=r.uniqueId(),e.klout=this.kloutData(e),e},kloutData:function(e){var t=e.massrel&&e.massrel.klout||null;return t&&t.score&&(t.score_floor=Math.floor(window.parseInt(t.score))),t},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at")))},formattedDates:function(e,t){var n={display:e,"short":e,full:e,timestamp:e},r=i(e,t);return r.isValid()&&(n={display:this.displayDate(r),"short":this.shortDate(r),full:this.fullDate(r),timestamp:this.timestamp(r)}),n},displayDate:function(e){return e.fromNow()},shortDate:function(e){var t=i().diff(e),n=i.duration(t),r;return t<o.minute?r=n.seconds()+"s":t<o.hour?r=n.minutes()+"m":t<o.day?r=n.hours()+"h":t<o.week?r=n.days()+"d":t<o.month?r=n.weeks()+"w":r=e.format("M/D/YY"),r},fullDate:function(e){return e.format("lll")},timestamp:function(e){return e.toISOString()}})}),n("twitter-text/js/main",[],function(){function n(t,n){return n=n||"",typeof t!="string"&&(t.global&&n.indexOf("g")<0&&(n+="g"),t.ignoreCase&&n.indexOf("i")<0&&(n+="i"),t.multiline&&n.indexOf("m")<0&&(n+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,n){var r=e.txt.regexen[n]||"";return typeof r!="string"&&(r=r.source),r}),n)}function r(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function i(e,t,n){var r=String.fromCharCode(t);return n!==t&&(r+="-"+String.fromCharCode(n)),e.push(r),e}function m(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function w(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:typeof e=="string"&&e.match(t)&&RegExp["$&"]===e}var e={};e.txt={},e.txt.regexen={};var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return t[e]})},e.txt.regexSupplant=n,e.txt.stringSupplant=r,e.txt.addCharsToCharClass=i;var s=String.fromCharCode,o=[s(32),s(133),s(160),s(5760),s(6158),s(8232),s(8233),s(8239),s(8287),s(12288)];i(o,9,13),i(o,8192,8202);var u=[s(65534),s(65279),s(65535)];i(u,8234,8238),e.txt.regexen.spaces_group=n(o.join("")),e.txt.regexen.spaces=n("["+o.join("")+"]"),e.txt.regexen.invalid_chars_group=n(u.join("")),e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg,e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;var a=[];i(a,1024,1279),i(a,1280,1319),i(a,11744,11775),i(a,42560,42655),i(a,1425,1471),i(a,1473,1474),i(a,1476,1477),i(a,1479,1479),i(a,1488,1514),i(a,1520,1524),i(a,64274,64296),i(a,64298,64310),i(a,64312,64316),i(a,64318,64318),i(a,64320,64321),i(a,64323,64324),i(a,64326,64335),i(a,1552,1562),i(a,1568,1631),i(a,1646,1747),i(a,1749,1756),i(a,1758,1768),i(a,1770,1775),i(a,1786,1788),i(a,1791,1791),i(a,1872,1919),i(a,2208,2208),i(a,2210,2220),i(a,2276,2302),i(a,64336,64433),i(a,64467,64829),i(a,64848,64911),i(a,64914,64967),i(a,65008,65019),i(a,65136,65140),i(a,65142,65276),i(a,8204,8204),i(a,3585,3642),i(a,3648,3662),i(a,4352,4607),i(a,12592,12677),i(a,43360,43391),i(a,44032,55215),i(a,55216,55295),i(a,65441,65500),i(a,12449,12538),i(a,12540,12542),i(a,65382,65439),i(a,65392,65392),i(a,65296,65305),i(a,65313,65338),i(a,65345,65370),i(a,12353,12438),i(a,12441,12446),i(a,13312,19903),i(a,19968,40959),i(a,173824,177983),i(a,177984,178207),i(a,194560,195103),i(a,12291,12291),i(a,12293,12293),i(a,12347,12347),e.txt.regexen.nonLatinHashtagChars=n(a.join(""));var f=[];i(f,192,214),i(f,216,246),i(f,248,255),i(f,256,591),i(f,595,596),i(f,598,599),i(f,601,601),i(f,603,603),i(f,611,611),i(f,616,616),i(f,623,623),i(f,626,626),i(f,649,649),i(f,651,651),i(f,699,699),i(f,768,879),i(f,7680,7935),e.txt.regexen.latinAccentChars=n(f.join("")),e.txt.regexen.hashSigns=/[#＃]/,e.txt.regexen.hashtagAlpha=n(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.hashtagAlphaNumeric=n(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.endHashtagMatch=n(/^(?:#{hashSigns}|:\/\/)/),e.txt.regexen.hashtagBoundary=n(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),e.txt.regexen.validHashtag=n(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/,e.txt.regexen.atSigns=/[@＠]/,e.txt.regexen.validMentionOrList=n("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),e.txt.regexen.validReply=n(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),e.txt.regexen.endMentionMatch=n(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),e.txt.regexen.validUrlPrecedingChars=n(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,e.txt.regexen.invalidDomainChars=r("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen),e.txt.regexen.validDomainChars=n(/[^#{invalidDomainChars}]/),e.txt.regexen.validSubdomain=n(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validDomainName=n(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validGTLD=n(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),e.txt.regexen.validCCTLD=n(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))")),e.txt.regexen.validPunycode=n(/(?:xn--[0-9a-z]+)/),e.txt.regexen.validDomain=n(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),e.txt.regexen.validAsciiDomain=n(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),e.txt.regexen.invalidShortDomain=n(/^#{validDomainName}#{validCCTLD}$/),e.txt.regexen.validPortNumber=n(/[0-9]+/),e.txt.regexen.validGeneralUrlPathChars=n(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),e.txt.regexen.validUrlBalancedParens=n(/\(#{validGeneralUrlPathChars}+\)/i),e.txt.regexen.validUrlPathEndingChars=n(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),e.txt.regexen.validUrlPath=n("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,e.txt.regexen.extractUrl=n("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,e.txt.regexen.urlHasProtocol=/^https?:\/\//i,e.txt.regexen.urlHasHttps=/^https:\/\//i,e.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,e.txt.regexen.validCashtag=n("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),e.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,e.txt.regexen.validateUrlPchar=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,e.txt.regexen.validateUrlUserinfo=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,e.txt.regexen.validateUrlIpv4=n(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,e.txt.regexen.validateUrlIp=n("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomain=n(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),e.txt.regexen.validateUrlHost=n("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomain=n(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),e.txt.regexen.validateUrlUnicodeHost=n("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),e.txt.regexen.validateUrlPort=/[0-9]{1,5}/,e.txt.regexen.validateUrlUnicodeAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlPath=n(/(\/#{validateUrlPchar}*)*/i),e.txt.regexen.validateUrlQuery=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlFragment=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlUnencoded=n("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l="tweet-url list-slug",c="tweet-url username",h="tweet-url hashtag",p="tweet-url cashtag",d={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},v={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(t){var n="";for(var r in t){var i=t[r];v[r]&&(i=i?r:null);if(i==null)continue;n+=" "+e.txt.htmlEscape(r)+'="'+e.txt.htmlEscape(i.toString())+'"'}return n},e.txt.linkToText=function(t,n,i,s){s.suppressNoFollow||(i.rel="nofollow"),s.linkAttributeBlock&&s.linkAttributeBlock(t,i),s.linkTextBlock&&(n=s.linkTextBlock(t,n));var o={text:n,attr:e.txt.tagAttrs(i)};return r("<a#{attr}>#{text}</a>",o)},e.txt.linkToTextWithSymbol=function(t,n,r,i,s){var o=s.symbolTag?"<"+s.symbolTag+">"+n+"</"+s.symbolTag+">":n;r=e.txt.htmlEscape(r);var u=s.textWithSymbolTag?"<"+s.textWithSymbolTag+">"+r+"</"+s.textWithSymbolTag+">":r;return s.usernameIncludeSymbol||!n.match(e.txt.regexen.atSigns)?e.txt.linkToText(t,o+u,i,s):o+e.txt.linkToText(t,u,i,s)},e.txt.linkToHashtag=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.hashtag),o=m(r.htmlAttrs||{});return o.href=r.hashtagUrlBase+s,o.title="#"+s,o["class"]=r.hashtagClass,s.charAt(0).match(e.txt.regexen.rtl_chars)&&(o["class"]+=" rtl"),r.targetBlank&&(o.target="_blank"),e.txt.linkToTextWithSymbol(t,i,s,o,r)},e.txt.linkToCashtag=function(t,n,r){var i=e.txt.htmlEscape(t.cashtag),s=m(r.htmlAttrs||{});return s.href=r.cashtagUrlBase+i,s.title="$"+i,s["class"]=r.cashtagClass,r.targetBlank&&(s.target="_blank"),e.txt.linkToTextWithSymbol(t,"$",i,s,r)},e.txt.linkToMentionAndList=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.screenName),o=e.txt.htmlEscape(t.listSlug),u=t.listSlug&&!r.suppressLists,a=m(r.htmlAttrs||{});return a["class"]=u?r.listClass:r.usernameClass,a.href=u?r.listUrlBase+s+o:r.usernameUrlBase+s,!u&&!r.suppressDataScreenName&&(a["data-screen-name"]=s),r.targetBlank&&(a.target="_blank"),e.txt.linkToTextWithSymbol(t,i,u?s+o:s,a,r)},e.txt.linkToUrl=function(t,n,r){var i=t.url,s=i,o=e.txt.htmlEscape(s),u=r.urlEntities&&r.urlEntities[i]||t;u.display_url&&(o=e.txt.linkTextWithEntity(u,r));var a=m(r.htmlAttrs||{});return i.match(e.txt.regexen.urlHasProtocol)||(i="http://"+i),a.href=i,r.targetBlank&&(a.target="_blank"),r.urlClass&&(a["class"]=r.urlClass),r.urlTarget&&(a.target=r.urlTarget),!r.title&&u.display_url&&(a.title=u.expanded_url),e.txt.linkToText(t,o,a,r)},e.txt.linkTextWithEntity=function(t,n){var i=t.display_url,s=t.expanded_url,o=i.replace(/…/g,"");if(s.indexOf(o)!=-1){var u=s.indexOf(o),a={displayUrlSansEllipses:o,beforeDisplayUrl:s.substr(0,u),afterDisplayUrl:s.substr(u+o.length),precedingEllipsis:i.match(/^…/)?"…":"",followingEllipsis:i.match(/…$/)?"…":""};for(var f in a)a.hasOwnProperty(f)&&(a[f]=e.txt.htmlEscape(a[f]));return a.invisible=n.invisibleTagAttrs,r("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",a)}return i},e.txt.autoLinkEntities=function(t,n,r){r=m(r||{}),r.hashtagClass=r.hashtagClass||h,r.hashtagUrlBase=r.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",r.cashtagClass=r.cashtagClass||p,r.cashtagUrlBase=r.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",r.listClass=r.listClass||l,r.usernameClass=r.usernameClass||c,r.usernameUrlBase=r.usernameUrlBase||"https://twitter.com/",r.listUrlBase=r.listUrlBase||"https://twitter.com/",r.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(r),r.invisibleTagAttrs=r.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,s,o;if(r.urlEntities){i={};for(s=0,o=r.urlEntities.length;s<o;s++)i[r.urlEntities[s].url]=r.urlEntities[s];r.urlEntities=i}var u="",a=0;n.sort(function(e,t){return e.indices[0]-t.indices[0]});var f=r.htmlEscapeNonEntities?e.txt.htmlEscape:function(e){return e};for(var s=0;s<n.length;s++){var d=n[s];u+=f(t.substring(a,d.indices[0])),d.url?u+=e.txt.linkToUrl(d,t,r):d.hashtag?u+=e.txt.linkToHashtag(d,t,r):d.screenName?u+=e.txt.linkToMentionAndList(d,t,r):d.cashtag&&(u+=e.txt.linkToCashtag(d,t,r)),a=d.indices[1]}return u+=f(t.substring(a,t.length)),u},e.txt.autoLinkWithJSON=function(t,n,r){var i=[];for(var s in n)i=i.concat(n[s]);for(var o=0;o<i.length;o++)entity=i[o],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return e.txt.modifyIndicesFromUnicodeToUTF16(t,i),e.txt.autoLinkEntities(t,i,r)},e.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var r=e[n];if(d[n])continue;v[n]&&(r=r?n:null);if(r==null)continue;t[n]=r}return t},e.txt.autoLink=function(t,n){var r=e.txt.extractEntitiesWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUsernamesOrLists=function(t,n){var r=e.txt.extractMentionsOrListsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkHashtags=function(t,n){var r=e.txt.extractHashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkCashtags=function(t,n){var r=e.txt.extractCashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUrlsCustom=function(t,n){var r=e.txt.extractUrlsWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});var t=e[0];for(var n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},e.txt.extractEntitiesWithIndices=function(t,n){var r=e.txt.extractUrlsWithIndices(t,n).concat(e.txt.extractMentionsOrListsWithIndices(t)).concat(e.txt.extractHashtagsWithIndices(t,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(t));return r.length==0?[]:(e.txt.removeOverlappingEntities(r),r)},e.txt.extractMentions=function(t){var n=[],r=e.txt.extractMentionsWithIndices(t);for(var i=0;i<r.length;i++){var s=r[i].screenName;n.push(s)}return n},e.txt.extractMentionsWithIndices=function(t){var n=[],r,i=e.txt.extractMentionsOrListsWithIndices(t);for(var s=0;s<i.length;s++)r=i[s],r.listSlug==""&&n.push({screenName:r.screenName,indices:r.indices});return n},e.txt.extractMentionsOrListsWithIndices=function(t){if(!t||!t.match(e.txt.regexen.atSigns))return[];var n=[],r;return t.replace(e.txt.regexen.validMentionOrList,function(t,r,i,s,o,u,a){var f=a.slice(u+t.length);if(!f.match(e.txt.regexen.endMentionMatch)){o=o||"";var l=u+r.length,c=l+s.length+o.length+1;n.push({screenName:s,listSlug:o,indices:[l,c]})}}),n},e.txt.extractReplies=function(t){if(!t)return null;var n=t.match(e.txt.regexen.validReply);return!n||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:n[1]},e.txt.extractUrls=function(t,n){var r=[],i=e.txt.extractUrlsWithIndices(t,n);for(var s=0;s<i.length;s++)r.push(i[s].url);return r},e.txt.extractUrlsWithIndices=function(t,n){n||(n={extractUrlsWithoutProtocol:!0});if(!t||(n.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];var r=[];while(e.txt.regexen.extractUrl.exec(t)){var i=RegExp.$2,s=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=e.txt.regexen.extractUrl.lastIndex,l=f-s.length;if(!o){if(!n.extractUrlsWithoutProtocol||i.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=!1,p=0;u.replace(e.txt.regexen.validAsciiDomain,function(t){var n=u.indexOf(t,p);p=n+t.length,c={url:t,indices:[l+n,l+p]},h=t.match(e.txt.regexen.invalidShortDomain),h||r.push(c)});if(c==null)continue;a&&(h&&r.push(c),c.url=s.replace(u,c.url),c.indices[1]=f)}else s.match(e.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,f=l+s.length),r.push({url:s,indices:[l,f]})}return r},e.txt.extractHashtags=function(t){var n=[],r=e.txt.extractHashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].hashtag);return n},e.txt.extractHashtagsWithIndices=function(t,n){n||(n={checkUrlOverlap:!0});if(!t||!t.match(e.txt.regexen.hashSigns))return[];var r=[];t.replace(e.txt.regexen.validHashtag,function(t,n,i,s,o,u){var a=u.slice(o+t.length);if(a.match(e.txt.regexen.endHashtagMatch))return;var f=o+n.length,l=f+s.length+1;r.push({hashtag:s,indices:[f,l]})});if(n.checkUrlOverlap){var i=e.txt.extractUrlsWithIndices(t);if(i.length>0){var s=r.concat(i);e.txt.removeOverlappingEntities(s),r=[];for(var o=0;o<s.length;o++)s[o].hashtag&&r.push(s[o])}}return r},e.txt.extractCashtags=function(t){var n=[],r=e.txt.extractCashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].cashtag);return n},e.txt.extractCashtagsWithIndices=function(t){if(!t||t.indexOf("$")==-1)return[];var n=[];return t.replace(e.txt.regexen.validCashtag,function(e,t,r,i,s,o){var u=s+t.length,a=u+i.length+1;n.push({cashtag:i,indices:[u,a]})}),n},e.txt.modifyIndicesFromUnicodeToUTF16=function(t,n){e.txt.convertUnicodeIndices(t,n,!1)},e.txt.modifyIndicesFromUTF16ToUnicode=function(t,n){e.txt.convertUnicodeIndices(t,n,!0)},e.txt.getUnicodeTextLength=function(t){return t.replace(e.txt.regexen.non_bmp_code_pairs," ").length},e.txt.convertUnicodeIndices=function(e,t,n){if(t.length==0)return;var r=0,i=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var s=0,o=t[0];while(r<e.length){if(o.indices[0]==(n?r:i)){var u=o.indices[1]-o.indices[0];o.indices[0]=n?i:r,o.indices[1]=o.indices[0]+u,s++;if(s==t.length)break;o=t[s]}var a=e.charCodeAt(r);55296<=a&&a<=56319&&r<e.length-1&&(a=e.charCodeAt(r+1),56320<=a&&a<=57343&&r++),i++,r++}},e.txt.splitTags=function(e){var t=e.split("<"),n,r=[],i;for(var s=0;s<t.length;s+=1){i=t[s];if(!i)r.push("");else{n=i.split(">");for(var o=0;o<n.length;o+=1)r.push(n[o])}}return r},e.txt.hitHighlight=function(t,n,r){var i="em";n=n||[],r=r||{};if(n.length===0)return t;var s=r.tag||i,o=["<"+s+">","</"+s+">"],u=e.txt.splitTags(t),a,f,l="",c=0,h=u[0],p=0,d=0,v=!1,m=h,g=[],y,b,w,E,S;for(a=0;a<n.length;a+=1)for(f=0;f<n[a].length;f+=1)g.push(n[a][f]);for(y=0;y<g.length;y+=1){b=g[y],w=o[y%2],E=!1;while(h!=null&&b>=p+h.length)l+=m.slice(d),v&&b===p+m.length&&(l+=w,E=!0),u[c+1]&&(l+="<"+u[c+1]+">"),p+=m.length,d=0,c+=2,h=u[c],m=h,v=!1;!E&&h!=null?(S=b-p,l+=m.slice(d,S)+w,d=S,y%2===0?v=!0:v=!1):E||(E=!0,l+=w)}if(h!=null){d<m.length&&(l+=m.slice(d));for(y=c+1;y<u.length;y+=1)l+=y%2===0?u[y]:"<"+u[y]+">"}return l};var g=140,y=[s(65534),s(65279),s(65535),s(8234),s(8235),s(8236),s(8237),s(8238)];e.txt.getTweetLength=function(t,n){n||(n={short_url_length:22,short_url_length_https:23});var r=e.txt.getUnicodeTextLength(t),i=e.txt.extractUrlsWithIndices(t);e.txt.modifyIndicesFromUTF16ToUnicode(t,i);for(var s=0;s<i.length;s++)r+=i[s].indices[0]-i[s].indices[1],i[s].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?r+=n.short_url_length_https:r+=n.short_url_length;return r},e.txt.isInvalidTweet=function(t){if(!t)return"empty";if(e.txt.getTweetLength(t)>g)return"too_long";for(var n=0;n<y.length;n++)if(t.indexOf(y[n])>=0)return"invalid_characters";return!1},e.txt.isValidTweetText=function(t){return!e.txt.isInvalidTweet(t)},e.txt.isValidUsername=function(t){if(!t)return!1;var n=e.txt.extractMentions(t);return n.length===1&&n[0]===t.slice(1)};var b=n(/^#{validMentionOrList}$/);return e.txt.isValidList=function(e){var t=e.match(b);return!!t&&t[1]==""&&!!t[4]},e.txt.isValidHashtag=function(t){if(!t)return!1;var n=e.txt.extractHashtags(t);return n.length===1&&n[0]===t.slice(1)},e.txt.isValidUrl=function(t,n,r){n==null&&(n=!0),r==null&&(r=!0);if(!t)return!1;var i=t.match(e.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==t)return!1;var s=i[1],o=i[2],u=i[3],a=i[4],f=i[5];return(!r||w(s,e.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&w(u,e.txt.regexen.validateUrlPath)&&w(a,e.txt.regexen.validateUrlQuery,!0)&&w(f,e.txt.regexen.validateUrlFragment,!0)?n&&w(o,e.txt.regexen.validateUrlUnicodeAuthority)||!n&&w(o,e.txt.regexen.validateUrlAuthority):!1},e}),n("twitter-text/index",["./js/main"],function(e){return e}),n("twitter-text",["twitter-text/index"],function(e){return e}),n("massrel-js-backbone/TwitterStatusModel",["require","massrel-js","./StatusModel","twitter-text","lodash"],function(e){var t=e("massrel-js"),n=e("./StatusModel"),r=e("twitter-text"),i=e("lodash"),s={thumb:"_normal",small:"_normal",medium:"_bigger",large:"_reasonably_small",huge:""},o=["network","sourceNetwork","sourceName","massrel"],u=["original_referer"],a="ddd MMM DD HH:mm:ss ZZ YYYY";return n.extend({defaults:i.extend(i.result(n.prototype,"defaults"),{original_referer:t.intents.original_referer,relativeDateFormat:"short"}),parse:function(e){e=n.prototype.parse.apply(this,arguments);if(e.retweeted_status){var t=e;e=e.retweeted_status,e.original_status=t,delete e.original_status.retweeted_status,e.retweet=!0,e.retweeted_by_user=e.original_status.user,i.extend(e,i.pick(e.original_status,o)),e.klout=this.kloutData(e)}var s=[];e.entities&&(e.entities.urls&&e.entities.urls.length>0&&(s=s.concat(e.entities.urls)),e.entities.media&&e.entities.media.length>0&&(s=s.concat(e.entities.media))),e.formattedText=r.txt.autoLink(e.text,{usernameIncludeSymbol:!0,urlEntities:s});var u=e.geo||e.geo_hint;return u&&(e.coordinates=u.coordinates),e},constructor:function(){n.apply(this,arguments),this.generateIntentUrls(),this.generateAvatarUrl(),this.on("change:original_referer",i.bind(this.generateIntentUrls,this)),this.on("change:avatar_resolution",i.bind(this.generateAvatarUrl,this))},generateAvatarUrl:function(){var e=this.get("avatar_resolution"),t=this.get("user"),n=s[e];if(n){var r=t.profile_image_url_https.replace("_normal",n);t.profile_image_url_https=r}},generateIntentUrls:function(){var e=i.pick(this.toJSON(),u),n=this.get("id_str");this.set("replyUrl",t.intents.reply(n,e)),this.set("retweetUrl",t.intents.retweet(n,e)),this.set("favUrl",t.intents.favorite(n,e))},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at"),a))}})}),n("massrel-js-backbone/FacebookStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),r=e("lodash");return t.extend({parse:function(e){e=t.prototype.parse.apply(this,arguments);var n="https://www.facebook.com/",i=e.facebook_id.split("_"),s=e.type;r.contains(["photo","video","link","post"],s)?n+=[i[0],"posts",i[1]].join("/"):e.kind==="comment"?i.length===2?n+=i[0]+"?comment_id="+i[1]:(n+=[i[0],"posts",i[1]].join("/"),i[2]&&(n+="?comment_id="+i[2])):n+=e.facebook_id,e.permalink=n,e.action_available={comment:!0,share:!1,like:!0},e.kind==="comment"&&(e.action_available.comment=!1),e.share_text&&e.story&&(e.formattedStory=this.autoLink(e.story)),e.originalStatus=r.extend({},e),typeof e.originalStatus.id=="string"&&(e.originalStatus.id=e.originalStatus.id.replace("facebook:",""));if(e.message||e.name)e.formattedText=this.autoLink(e.message||e.name);return e.hide_app_cards&&e.fbapp_id&&e.application&&e.fbapp_id===e.application.id&&(e.mediaHtml=""),e},autoLink:function(e){var t=n.txt.extractUrlsWithIndices(e).concat(n.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}));return n.txt.removeOverlappingEntities(t),n.txt.autoLinkEntities(e,t,{hashtagClass:"facebook-hashtag",urlClass:"facebook-url",hashtagUrlBase:"https://www.facebook.com/hashtag/",targetBlank:!0})},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time")))}})}),n("massrel-js-backbone/InstagramStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.user.profile_picture&&(e.user.profile_picture=this.embedlyImageProxyUrl(e.user.profile_picture),e.caption&&e.caption.from.profile_picture&&(e.caption.from.profile_picture=this.embedlyImageProxyUrl(e.caption.from.profile_picture))),e.caption&&(e.caption.text=n.txt.autoLinkUrlsCustom(e.caption.text)),e.location&&_.isNumber(e.location.latitude)&&_.isNumber(e.location.longitude)&&(e.coordinates=[e.location.latitude,e.location.longitude]),e.place=e.location,delete e.location,e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time"),"X"))}})}),n("massrel-js-backbone/GoogleStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.title=n.txt.autoLinkUrlsCustom(e.title),e.place=e.location,delete e.location,e.formattedText=e.title,e.object&&e.object.content&&(e.formattedText=e.object.content),e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("published")))}})}),n("massrel-js-backbone/GetglueStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),r=e("lodash"),i={thumb:"tiny_",small:"tiny_",medium:"",large:"large_",huge:"large_"},s=/\/[a-z_]*tile\./;return t.extend({defaults:r.extend(r.result(t.prototype,"defaults"),{relativeDateFormat:"short"}),parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.actor&&e.actor.image&&(e.actor.image=this.embedlyImageProxyUrl(e.actor.image)),e.canonical_link=e.link,r.isUndefined(e.inReplyTo)||(e.canonical_link=e.inReplyTo.link),e.body=n.txt.autoLinkUrlsCustom(e.body),e},initialize:function(){t.prototype.initialize.apply(this,arguments),this.generateAvatarUrl()},generateAvatarUrl:function(){var e=this.get("actor"),t=this.get("avatar_resolution"),n=i[t];if(n){var r=e.image.replace(s,"/"+n+"tile.");e.image=r}},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("publishTime")))}})}),n("massrel-js-backbone/RssStatusModel",["./StatusModel","twitter-text"],function(e,t){return e.extend({parse:function(n){return n=e.prototype.parse.apply(this,arguments),n.description=t.txt.autoLinkUrlsCustom(n.description),n},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("pub_date")))}})}),n("massrel-js-backbone/statusModelFactory",["./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./InstagramStatusModel","./GoogleStatusModel","./GetglueStatusModel","./RssStatusModel"],function(e,t,n,r,i,s,o){var u=function(t,n,r){var i;return u.detectSource(t),typeof r=="undefined"&&(r=u.constructors),r[t.sourceName]!==undefined?i=r[t.sourceName]:i=e,new i(t,n)};return u.constructors={twitter:t,facebook:n,instagram:r,google:i,getglue:s,rss:o},u.detectSource=function(e){return e.sourceNetwork={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},typeof e.sourceNetwork[e.network]!="undefined"&&(e.sourceNetwork[e.network]=!0,e.sourceName=e.network),e.network==="google_plus"&&(e.sourceNetwork.google=!0,e.sourceName="google"),e.network==="massrelevance"&&(e.sourceNetwork.message=!0,e.sourceName="message"),e},u}),n("massrel-js-backbone/mediaCollectionFactory",["q","./MediaCollection","media-meta"],function(e,t,n){var r=function(r,i){var s=e.defer(),o=n.promise(r.toJSON(),i);return o.done(function(e){s.resolve(new t(e))},function(){s.reject()}),s.promise};return r}),n("massrel-js-backbone/StreamPoller",["require","lodash","q","./backbone","./statusModelFactory","./mediaCollectionFactory","massrel-js"],function(e){var t=e("lodash"),n=e("q"),r=e("./backbone"),i=e("./statusModelFactory"),s=e("./mediaCollectionFactory"),o=e("massrel-js"),u=o.protocol==="https";return r.Model.extend({defaults:{embed_media:!1,avatar_resolution:"small",total:0,media_config:{isSecure:u,autoplay_video:!1,loop_video:!1}},initialize:function(){var e=this;e.filters=[],e.asyncFilters=[],e.queue=new r.Collection,e.moreQueue=new r.Collection;var n=e.toJSON();e.stream=new o.Stream(n.stream_name),e.poller=e.stream.poller(n),e.poller.data(function(t){var n=e.get("total")+t.length;e.set("total",n),n===0&&e.trigger("no-data"),t.length===0&&e.trigger("no-new-data")}),e.poller.batch(t.bind(e.handleBatch,e))},start:function(){var e=this;return this.get("stream_name")&&e.poller.start(),e},handleBatch:function(e){var t=this;t.createModels(e).done(function(e){t.queue.add(e,{at:0}),t.trigger("loaded-batch",e.length)})},createModels:function(e){var r=this,o=n.defer(),u=r.get("embed_media"),a=r.get("avatar_resolution"),f=r.get("media_config"),l=[],c=[];t.each(e,function(e,t){if(e.in_reply_to){var n=i(e.in_reply_to);l.push(n)}var r=i(e);l.push(r),e.in_reply_to&&(n.set("reply",r),r.set("in_reply_to",n))}),t.each(l,function(e,t){a&&e.set("avatar_resolution",a);if(u){var n=s(e,f);n.then(function(t){e.set("media",t)}).fail(function(){}),c.push(n)}});if(u)n.allSettled(c).done(function(){var e=r.applyFilters(l);r.applyAsyncFilters(e).then(function(e){o.resolve(e)})});else{var h=r.applyFilters(l);r.applyAsyncFilters(h).then(function(e){o.resolve(e)})}return o.promise},stop:function(){var e=this;return e.poller.stop(),e},filter:function(e){var t=this;return t.filters.push(e),t.queue.remove(t.queue.reject(e)),t.moreQueue.remove(t.moreQueue.reject(e)),t},asyncFilter:function(e){var n=this;n.asyncFilters.push(e);var r=t.clone(n.queue.models),i=t.clone(n.moreQueue.models);return n.applyAsyncFilters(n.queue.models).then(function(e){var i=t.difference(r,e);n.queue.remove(i)}),n.applyAsyncFilters(n.moreQueue.models).then(function(e){var r=t.difference(i,e);n.moreQueue.remove(r)}),n},applyFilters:function(e){var n=this;return t.each(n.filters,function(n){e=t.filter(e,n)}),e},applyAsyncFilters:function(e){var r=n.defer(),i=function(e){r.resolve(e)};if(this.asyncFilters.length){var s=n(e);t.each(this.asyncFilters,function(e){s=s.then(e)}),s.then(i)}else r.resolve(e);return r.promise},more:function(){var e=this;return e.trigger("loading-more"),e.poller.more(t.bind(e.loadedMore,e)),e},loadedMore:function(e){var t=this;e.length===0?t.trigger("end-of-data"):t.createModels(e).done(function(e){t.moreQueue.add(e),t.trigger("loaded-more",e.length)})}})}),n("massrel-js-backbone/Filters",["require","./backbone","q","jquery","lodash"],function(e){function s(e){var t=r("head"),i=n.defer(),s=r("<img/>");return s.on("load",function(){s.remove(),i.resolve()}).on("error",function(){s.remove(),i.reject()}),t.append(s),s.attr("src",e),i.promise}function o(e,t){var r=[],o=[],u=n.defer();return i.each(e,function(e){var i=n.defer();r.push(i.promise);var u=e.get("images");u?u.standard_resolution&&u.standard_resolution.url?s(u.standard_resolution.url).then(function(){o.push(e),i.resolve()},function(){i.resolve()}):i.resolve():(t&&t.includeText&&o.push(e),i.resolve())}),n.allSettled(r).then(function(){u.resolve(i.intersection(e,o))}),u.promise}function u(e){return o(e,{includeText:!0})}var t=e("./backbone"),n=e("q"),r=e("jquery"),i=e("lodash");return{sync:{},async:{hasValidImages:o,hasValidImagesOrText:u}}}),n("massrel-js-backbone/ComparePoller",["./backbone","massrel-js"],function(e,t){return e.Model.extend({defaults:function(){return{streams:[],frequency:20}},initialize:function(){var e=this,n=e.toJSON();e.compare=new t.Compare(n.streams),e.poller=e.compare.poller(n)},start:function(){var e=this;this.get("streams")&&this.get("streams").length>0&&(e.set("loading",!0),e.poller.data(function(t){e.set("data",t),e.set("loading",!1)}),e.poller.start())},stop:function(){this.poller.stop()}})}),n("massrel-js-backbone/MetaPoller",["require","./backbone","massrel-js"],function(e){var t=e("./backbone"),n=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,disregard:"",frequency:20,loading:!1,activity:{},count:{},networks:{}}},initialize:function(){var e=this,t=e.toJSON();e.stream=new n.Stream(t.stream_name),e.poller=e.stream.metaPoller(t)},start:function(){var e=this;this.get("stream_name")&&(e.set("loading",!0),e.poller.data(function(t){e.set(t),e.set("loading",!1)}),e.poller.start())},stop:function(){var e=this;e.poller.stop()}})}),n("massrel-js-backbone/TopThingsPoller",["require","./backbone","massrel-js","lodash"],function(e){var t=e("./backbone"),n=e("massrel-js"),r=e("lodash");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,frequency:20,resolution:"1h",start:"-1h",finish:"",thing:"",limit:50,loading:!1,data:{}}},start:function(){this.stop();if(this.get("stream_name")){var e=r.pick(this.toJSON(),["thing","resolution","start","finish","limit","stream_name"]);this.stream=new n.Stream(e.stream_name),this.poller=this.stream.topThingsPoller(e),this.set("loading",!0),this.poller.data(r.bind(function(e){this.set("data",e),this.set("loading",!1)},this)),this.poller.start()}},stop:function(){this.poller&&this.poller.stop()}})}),n("massrel-js-backbone/main",["require","./StreamPoller","./Filters","./ComparePoller","./MetaPoller","./TopThingsPoller","./statusModelFactory","./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./GoogleStatusModel","./GetglueStatusModel","./InstagramStatusModel","./RssStatusModel","./mediaCollectionFactory","./MediaCollection","./MediaModel"],function(e){var t=e("./StreamPoller"),n=e("./Filters"),r=e("./ComparePoller"),i=e("./MetaPoller"),s=e("./TopThingsPoller"),o=e("./statusModelFactory"),u=e("./StatusModel"),a=e("./TwitterStatusModel"),f=e("./FacebookStatusModel"),l=e("./GoogleStatusModel"),c=e("./GetglueStatusModel"),h=e("./InstagramStatusModel"),p=e("./RssStatusModel"),d=e("./mediaCollectionFactory"),v=e("./MediaCollection"),m=e("./MediaModel");return{StreamPoller:t,ComparePoller:r,MetaPoller:i,TopThingsPoller:s,statusModelFactory:o,StatusModel:u,TwitterStatusModel:a,FacebookStatusModel:f,GoogleStatusModel:l,GetglueStatusModel:c,InstagramStatusModel:h,RssStatusModel:p,mediaCollectionFactory:d,MediaCollection:v,MediaModel:m,Filters:n}}),n("massrel-js-backbone",["massrel-js-backbone/main"],function(e){return e}),n("js/manager",["require","lodash","massrel-js-backbone"],function(e){var t=e("lodash"),n=e("massrel-js-backbone"),r=function(e){var n={frequency:2e3};this.config=t.defaults(e,n),this.groups={},this.probability=[],this.tiles={}};return r.prototype.addTile=function(e,t,n){this.groups[t]||(this.groups[t]={tiles:[]}),this.tiles[e.id]={model:e.model,opts:n,groupId:t};var r=this.groups[t].tiles;r.push(e.id),this.probability.push(t),e.view.$el.addClass(t).attr("data-tile-group",t),e.view.$el.parent().addClass(e.id).addClass(t)},r.prototype.addGroup=function(e,t,r){this.groups[e]||(this.groups[e]={tiles:[]});var i=this.groups[e];i.groupId=e,i.poller=new n.StreamPoller(t),i.opts=r,i._index=-1,r.require_media&&i.poller.filter(function(e){return e.get("media")&&e.get("media").models.length})},r.prototype.start=function(){var e=this;t.forEach(this.groups,function(t,n){t.poller.start(),t.poller.on("loaded-batch",function(r){t.poller.queue.length>50&&t.poller.queue.remove(t.poller.queue.slice(50)),t._index+=r,e.eventLoadedBatch(n,r)})}),MR.ENV.instance.on(".tile-1:show-details",function(t){var n=e.tiles[t.id],r=e.groups[n.groupId],i=n.opts.handleDetails||r.opts.handleDetails;i&&i(t.payload)})},r.prototype.stop=function(){clearInterval(this._interval),this._interval=null},r.prototype.eventLoadedBatch=function(e,n){this._firstLoad||(this._firstLoad=!0,this._interval=setInterval(t.bind(this.eventRefreshRandom,this),this.config.frequency)),this.groups[e]._firstLoad||(this.groups[e]._firstLoad=!0,this.eventRefreshAll(e))},r.prototype.eventRefreshAll=function(e){var n=this;if(window.pause)return;t.forEach(this.groups,function(r,i){if(e&&e!=i)return;t.forEach(r.tiles,function(e){n.fillTile(n.tiles[e])})})},r.prototype.eventRefreshRandom=function(){if(window.pause)return;this.fillTile(this.randomTile())},r.prototype.fillTile=function(e){var t=this.groups[e.groupId];if(t.poller.queue.length===0)return;t._index++,t._index>=t.poller.queue.length&&(t._index=0);var n=t.poller.queue.at(t._index),r=t.opts.status_component.viewFactory(n);e.model.changeWithModelView(n,r)},r.prototype.randomTile=function(){var e=this.probability[Math.floor(this.probability.length*Math.random())],t=this.groups[e].tiles[Math.floor(this.groups[e].tiles.length*Math.random())];return this.tiles[t]},r}),function(){var e={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Could not find property '"+e+"'")});var n=Object.prototype.toString,r="[object Function]";e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})})(e);var t=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=t,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},function(){e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");var n=[],r=0;for(var i=0,s=t.length;i<s;i++){var o=t[i];if(o===".."||o==="."||o==="this"){if(n.length>0)throw new e.Exception("Invalid path: "+this.original);o===".."?r++:this.isScoped=!0}else n.push(o)}this.parts=n,this.string=n.join("."),this.depth=r,this.isSimple=t.length===1&&!this.isScoped&&r===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var r=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<r.length;n++)this[r[n]]=t[r[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":r.test(t)?t.replace(n,i):t},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.prototype={compiler:t,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var r=function(e){this.value=e};n.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(u=s.length;this.i<u;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:n,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new r(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),i;if(n){var s=this.popStack(!0);if(s instanceof r)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];i instanceof r?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof r?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof r?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=n.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(r,i){if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s=e.parse(r),o=(new t).compile(s,i);return(new n).compile(o,i)},e.compile=function(r,i){function o(){var s=e.parse(r),o=(new t).compile(s,i),u=(new n).compile(o,i,undefined,!0);return e.template(u)}if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s;return function(e,t){return s||(s=o()),s.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(t,n,r,i,s,o){var u={helpers:i,partials:s,data:o};if(t===undefined)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(r,u);if(!e.compile)throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode");return s[n]=e.compile(t,{data:o!==undefined}),s[n](r,u)}},e.template=e.VM.template}(e.Compiler,e.JavaScriptCompiler),n("handlebars/Handlebars",[],function(){return e})}(),n("handlebars",["handlebars/Handlebars"],function(e){return e}),n("hbs/hbs",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),n("hbs",["hbs/hbs"],function(e){return e}),n("hbs/hbs!grid",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="";return s});return t.registerPartial("grid",n),n}),n("hbs/hbs!grid-box",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return" team"}function h(e,t){return" player"}function p(e,t){var n="",r;return n+=" style=\"background-image: url('"+f((r=(r=e.photos,r==null||r===!1?r:r.large),typeof r===a?r.apply(e):r))+"')\"",n}function d(e,t){var r="",i;return r+=" ",(i=n.gridSize)?i=i.call(e,{hash:{}}):(i=e.gridSize,i=typeof i===a?i.apply(e):i),r+=f(i),r}function v(e,t){var n="",r;return n+="\n        "+f((r=(r=e.breakName,r==null||r===!1?r:r.first),typeof r===a?r.apply(e):r))+"<br>"+f((r=(r=e.breakName,r==null||r===!1?r:r.last),typeof r===a?r.apply(e):r))+"\n      ",n}function m(e,t){var r="",i;return r+="\n        ",(i=n.nameShort)?i=i.call(e,{hash:{}}):(i=e.nameShort,i=typeof i===a?i.apply(e):i),r+=f(i)+"\n      ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="box rank ',(o=n.backgroundsize)?o=o.call(t,{hash:{}}):(o=t.backgroundsize,o=typeof o===a?o.apply(t):o),s+=f(o),o=n["if"].call(t,t.team,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;o=n["if"].call(t,t.player,{hash:{},inverse:l.noop,fn:l.program(3,h,i)});if(o||o===0)s+=o;s+='" id="box-',(o=n.index)?o=o.call(t,{hash:{}}):(o=t.index,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-player="',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'"',o=n["if"].call(t,t.bgSize,{hash:{},inverse:l.noop,fn:l.program(5,p,i)});if(o||o===0)s+=o;s+=' data-item="',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-stream="streamName">\n  <img src="'+f((o=(o=t.photos,o==null||o===!1?o:o.large),typeof o===a?o.apply(t):o))+'" />\n  <span class="rank-label',u=n["if"].call(t,t.gridSize,{hash:{},inverse:l.noop,fn:l.program(7,d,i)});if(u||u===0)s+=u;s+='">\n    <span class="rank',u=n["if"].call(t,t.team,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;s+='">',(u=n.rankLang)?u=u.call(t,{hash:{}}):(u=t.rankLang,u=typeof u===a?u.apply(t):u),s+=f(u)+'</span>\n    <span class="label',u=n["if"].call(t,t.team,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;s+='">\n      ',u=n["if"].call(t,t.player,{hash:{},inverse:l.program(11,m,i),fn:l.program(9,v,i)});if(u||u===0)s+=u;return s+="\n    </span>\n  </span>\n</div>",s});return t.registerPartial("grid-box",n),n}),n("hbs/hbs!player-card",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+='\n    <div class="stream">\n      <div class="title">'+f((i=(i=e.lang,i==null||i===!1?i:i.socialhome_playervoice),typeof i===a?i.apply(e):i))+'</div>\n      <nav class="subtitle">\n        <ul>\n        ',s=n["if"].call(e,(i=e.account,i==null||i===!1?i:i.twitter),{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(s||s===0)r+=s;r+="\n        ",s=n["if"].call(e,(i=e.account,i==null||i===!1?i:i.facebook),{hash:{},inverse:l.noop,fn:l.program(4,p,t)});if(s||s===0)r+=s;r+="\n        ",s=n["if"].call(e,(i=e.account,i==null||i===!1?i:i.instagram),{hash:{},inverse:l.noop,fn:l.program(6,d,t)});if(s||s===0)r+=s;return r+='\n        </ul>\n      </nav>\n      <div id="cardStream">\n        <div class="loading"></div>\n      </div>\n      <div class="none" style="display: none;">'+f((i=(i=e.lang,i==null||i===!1?i:i.socialhome_notweets),typeof i===a?i.apply(e):i))+"</div>\n    </div>\n    ",r}function h(e,t){var n="",r;return n+='<li class="twitter" data-network="twitter" data-acccount="'+f((r=(r=e.account,r==null||r===!1?r:r.twitter),typeof r===a?r.apply(e):r))+'">'+f((r=(r=e.lang,r==null||r===!1?r:r.socialhome_twitter),typeof r===a?r.apply(e):r))+"</li>",n}function p(e,t){var n="",r;return n+='<li class="facebook" data-network="facebook" data-acccount="'+f((r=(r=e.account,r==null||r===!1?r:r.facebook),typeof r===a?r.apply(e):r))+'">'+f((r=(r=e.lang,r==null||r===!1?r:r.socialhome_facebook),typeof r===a?r.apply(e):r))+"</li>",n}function d(e,t){var n="",r;return n+='<li class="instagram" data-network="instagram" data-acccount="'+f((r=(r=e.account,r==null||r===!1?r:r.instagram),typeof r===a?r.apply(e):r))+'">'+f((r=(r=e.lang,r==null||r===!1?r:r.socialhome_instagram),typeof r===a?r.apply(e):r))+"</li>",n}function v(e,t){var r="",i,s;r+='\n    <div class="stream">\n      <div class="title">'+f((i=(i=e.lang,i==null||i===!1?i:i.socialhome_playervoice),typeof i===a?i.apply(e):i))+'</div>\n      <nav class="subtitle">\n        <ul>\n        ',s=n["if"].call(e,(i=e.account,i==null||i===!1?i:i.twitter),{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(s||s===0)r+=s;return r+='\n        </ul>\n      </nav>\n      <div id="cardStream">\n        <div class="none">'+f((i=(i=e.lang,i==null||i===!1?i:i.socialhome_notweets),typeof i===a?i.apply(e):i))+"</div>\n      </div>\n    </div>\n    ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div id="player-card" class="modal-content card">\n  <i class="mr-action-click modal-close icon-close-x" data-action="close"></i>\n  <div class="card-head">\n    <div class="info">\n      <div class="place ',(o=n.trend)?o=o.call(t,{hash:{}}):(o=t.trend,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n        <div class="trend ',(o=n.trend)?o=o.call(t,{hash:{}}):(o=t.trend,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n          <span>'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_rank),typeof o===a?o.apply(t):o))+'</span>\n        </div>\n        <div class="rank">',(u=n.rankLang)?u=u.call(t,{hash:{}}):(u=t.rankLang,u=typeof u===a?u.apply(t):u),s+=f(u)+'</div>\n      </div>\n      <div class="photo">\n        <img src="'+f((o=(o=t.photos,o==null||o===!1?o:o.large),typeof o===a?o.apply(t):o))+'" />\n      </div>\n      <div class="about">\n        <div class="flag"><img src="http://img.fifa.com/images/flags/4/',(u=n.countryCode)?u=u.call(t,{hash:{}}):(u=t.countryCode,u=typeof u===a?u.apply(t):u),s+=f(u)+'.png" /></div>\n        <div class="name">',(u=n.name)?u=u.call(t,{hash:{}}):(u=t.name,u=typeof u===a?u.apply(t):u),s+=f(u)+'</div>\n        <div class="group">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_team),typeof o===a?o.apply(t):o))+" ",(u=n.countryName)?u=u.call(t,{hash:{}}):(u=t.countryName,u=typeof u===a?u.apply(t):u),s+=f(u)+" ",(u=n.countryGroup)?u=u.call(t,{hash:{}}):(u=t.countryGroup,u=typeof u===a?u.apply(t):u),s+=f(u)+'</div>\n      </div>\n    </div>\n\n    <div class="popularity">\n      <div class="title">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_popularity),typeof o===a?o.apply(t):o))+'</div>\n      <div class="percentages">\n        <div class="pos">\n          <span class="num">',(u=n.sentiment)?u=u.call(t,{hash:{}}):(u=t.sentiment,u=typeof u===a?u.apply(t):u),s+=f(u)+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_percent),typeof o===a?o.apply(t):o))+'</span>\n          <span class="arrow"></span>\n        </div>\n        <div class="neg">\n          <span class="arrow"></span>\n          <span class="num">',(u=n.sentimentLess)?u=u.call(t,{hash:{}}):(u=t.sentimentLess,u=typeof u===a?u.apply(t):u),s+=f(u)+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_percent),typeof o===a?o.apply(t):o))+'</span>\n        </div>\n      </div>\n      <div class="pop-bar neg">\n        <div class="pop-bar pop-bar-inner pos" style="width: ',(u=n.sentiment)?u=u.call(t,{hash:{}}):(u=t.sentiment,u=typeof u===a?u.apply(t):u),s+=f(u)+'%"></div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class="card-body">\n\n    <div class="stats">\n      <div class="title">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_playerstats),typeof o===a?o.apply(t):o))+'</div>\n\n      <div class="stat tph">\n        <div class="number">'+f((o=(o=t.countsFormat,o==null||o===!1?o:o.hourly),typeof o===a?o.apply(t):o))+'</div>\n        <div class="metric">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_mph),typeof o===a?o.apply(t):o))+'</div>\n      </div>\n\n      <div class="stat tpm">\n        <div class="number">'+f((o=(o=t.countsFormat,o==null||o===!1?o:o.tpm),typeof o===a?o.apply(t):o))+'</div>\n        <div class="metric">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_tpm),typeof o===a?o.apply(t):o))+'</div>\n      </div>\n\n      <div class="stat total">\n        <div class="number">'+f((o=(o=t.countsFormat,o==null||o===!1?o:o.total),typeof o===a?o.apply(t):o))+'</div>\n        <div class="metric">'+f((o=(o=t.lang,o==null||o===!1?o:o.socialhome_total),typeof o===a?o.apply(t):o))+"</div>\n      </div>\n\n    </div>\n\n    ",u=n["if"].call(t,t.account,{hash:{},inverse:l.program(8,v,i),fn:l.program(1,c,i)});if(u||u===0)s+=u;return s+="\n\n  </div>\n</div>",s});return t.registerPartial("player-card",n),n}),n("js/data",["require"],function(e){var t={countries:[{id:"usa",displayName:"USA",abbr:"USA",keywords:["#USASoccer","Go Usa"],accounts:{twitter:"@ussoccer",facebook:"officialussoccer",instagram:"ussoccer"},photoUrl:"http://placekitten.com/g/800/800"},{id:"bra",displayName:"Brazil",abbr:"BRA",keywords:["#BrazilSoccer","Go Brazil"],accounts:{twitter:"@brazil",facebook:"brazil",instagram:"brazil"},photoUrl:"http://placekitten.com/g/802/802"},{id:"ven",displayName:"Venezuela",abbr:"VEN",keywords:["#BrazilSoccer","Go Brazil"],accounts:{twitter:"@brazil",facebook:"brazil",instagram:"brazil"},photoUrl:"http://placekitten.com/g/802/802"},{id:"mex",displayName:"Mexico",abbr:"MEX",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/804/804"},{id:"can",displayName:"Canada",abbr:"CAN",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/806/806"},{id:"aus",displayName:"Australia",abbr:"AUS",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/808/808"},{id:"ita",displayName:"Italy",abbr:"ITA",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/810/810"},{id:"arg",displayName:"Argentina",abbr:"ARG",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/812/812"},{id:"jpn",displayName:"Japan",abbr:"JPN",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/814/814"},{id:"gre",displayName:"Greece",abbr:"GRE",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/816/816"},{id:"chi",displayName:"Chile",abbr:"CHI",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/818/818"},{id:"fra",displayName:"France",abbr:"FRA",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/820/820"},{id:"bel",displayName:"Belgium",abbr:"BEL",keywords:["#MexSoccer","Go Mexico"],accounts:{twitter:"@mexico",facebook:"mexico",instagram:"mexico"},photoUrl:"http://placekitten.com/g/822/822"}],players:[{id:"howard-rauscher",name:"Howard Rauscher",teamId:"usa",keywords:["howard","#nerd"],accounts:{twitter:"@howardr",facebook:"howardr",instagram:"howardr"},photos:{headshot:"http://placekitten.com/800/802",action:"http://placekitten.com/800/802"}},{id:"rick-ford",name:"Rick Ford",teamId:"usa",keywords:["trickford","#trickford"],accounts:{twitter:"@_trickford",facebook:"spoontwisted",instagram:"_trickford"},photos:{headshot:"http://placekitten.com/800/804",action:"http://placekitten.com/800/804"}},{id:"amanda-devay",name:"A-Man DaDeVay",teamId:"jpn",keywords:["howard","#nerd"],accounts:{twitter:"@pclark",facebook:"",instagram:"mrmerch"},photos:{headshot:"http://placekitten.com/820/806",action:"http://placekitten.com/820/806"}},{id:"paul-clark",name:"Paul Clark",teamId:"bra",keywords:["howard","#nerd"],accounts:{twitter:"@pclark",facebook:"",instagram:"mrmerch"},photos:{headshot:"http://placekitten.com/800/806",action:"http://placekitten.com/800/806"}},{id:"travis-benton",name:"Travis Ryan Benton",teamId:"mex",keywords:["howard","#nerd"],accounts:{twitter:"@t_rhinoceros",facebook:"t_rhinoceros",instagram:"t_rhinoceros"},photos:{headshot:"http://placekitten.com/800/810",action:"http://placekitten.com/800/810"}},{id:"brian-dainton",name:"Brian Dainton",teamId:"can",keywords:["howard","#nerd"],accounts:{twitter:"@bdainton",facebook:"bdainton",instagram:"bdainton"},photos:{headshot:"http://placekitten.com/800/812",action:"http://placekitten.com/800/812"}},{id:"mark-becerra",name:"Mark Becerra",teamId:"usa",keywords:["howard","#nerd"],accounts:{twitter:"@markulon",facebook:"markulon",instagram:"markulon"},photos:{headshot:"http://placekitten.com/800/814",action:"http://placekitten.com/800/814"}},{id:"michael-pazienza",name:"Michael Pazienza",teamId:"mex",keywords:["howard","#nerd"],accounts:{twitter:"@mpazienza",facebook:"",instagram:""},photos:{headshot:"http://placekitten.com/800/816",action:"http://placekitten.com/800/816"}},{id:"blake-kobelan",name:"Blake Kobelan",teamId:"bra",keywords:["howard","#nerd"],accounts:{twitter:"@bk",facebook:"bk",instagram:"bk"},photos:{headshot:"http://placekitten.com/800/818",action:"http://placekitten.com/800/818"}},{id:"steve-swanson",name:"Steve Swanson",teamId:"usa",keywords:["howard","#nerd"],accounts:{twitter:"@bk",facebook:"bk",instagram:"bk"},photos:{headshot:"http://placekitten.com/800/820",action:"http://placekitten.com/800/820"}},{id:"sam-decker",name:"Sam Decker",teamId:"mex",keywords:["howard","#nerd"],accounts:{twitter:"@bk",facebook:"bk",instagram:"bk"},photos:{headshot:"http://placekitten.com/800/822",action:"http://placekitten.com/800/822"}}],matches:[{id:"match1",teams:{home:"usa",away:"bra"},keywords:["usabrazil","#USAvsBrazil"],accounts:{home:{twitter:"@ussoccer",facebook:"officialussoccer",instagram:"ussoccer"},away:{twitter:"@brasoccer",facebook:"officialbrazilsoccer",instagram:"brazilsoccer"}},datetime:"6/15/2014 18:30:00"}]};return t}),window.fifaLangs={en:{socialhome_social:"Social",socialhome_teams:"Teams",socialhome_players:"Players",socialhome_view:"View:",socialhome_grid:"Grid",socialhome_list:"List",socialhome_activitymap:"Live Activity Map",socialhome_mph:"Mentions Per Hour",socialhome_tpm:"Tweets Per Minute",socialhome_total:"Total Mentions",socialhome_sortby:"Sort by:",socialhome_sortrank:"Rank",socialhome_sortcountry:"Country",socialhome_searchplayer:"Search for a Player",socialhome_searchcountry:"Search for a Country",socialhome_filterby:"Filter by",socialhome_selectteam:"Select A Team",socialhome_selectmatch:"Select A Match",socialhome_showall:"Show All",socialhome_contributors:"#JoinIn with…",socialhome_conversation:"Global Conversation",socialhome_joinconversation:"#JoinIn The Conversation",socialhome_hashtag:"#WorldCup",socialhome_tweetbutton:"Tweet",socialhome_postbutton:"Post",socialhome_networkor:"or",socialhome_all:"All",socialhome_fans:"Fans",socialhome_celebs:"Celebrities",socialhome_selectplayer:"Select A Player",socialhome_rank:"Rank",socialhome_popularity:"Fan Buzz",socialhome_percent:"%",socialhome_teamstats:"Team Statistics",socialhome_teamvoice:"The Team's Voice",socialhome_toptrending:"Top Trending",socialhome_playervoice:"The Players' Voice",socialhome_playerstats:"Player Statistics",socialhome_team:"Team",socialhome_groupa:"Group A",socialhome_groupb:"Group B",socialhome_groupc:"Group C",socialhome_groupd:"Group D",socialhome_groupe:"Group E",socialhome_groupf:"Group F",socialhome_groupg:"Group G",socialhome_grouph:"Group H",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"There are no recent tweets. Check back later!",socialhome_tugtext:"Which team do you support? Vote now.",socialhome_bra:"Brazil",socialhome_cro:"Croatia",socialhome_mex:"Mexico",socialhome_cam:"Cameroon",socialhome_esp:"Spain",socialhome_ned:"Netherlands",socialhome_chi:"Chile",socialhome_aus:"Australia",socialhome_col:"Colombia",socialhome_gre:"Greece",socialhome_civ:"Côte d'Ivoire",socialhome_jpn:"Japan",socialhome_uru:"Uruguay",socialhome_crc:"Costa Rica",socialhome_eng:"England",socialhome_ita:"Italy",socialhome_sui:"Switzerland",socialhome_ecu:"Ecuador",socialhome_fra:"France",socialhome_hon:"Honduras",socialhome_arg:"Argentina",socialhome_bih:"Bosnia and Herzegovina",socialhome_irn:"Iran",socialhome_nga:"Nigeria",socialhome_ger:"Germany",socialhome_por:"Portugal",socialhome_gha:"Ghana",socialhome_usa:"USA",socialhome_bel:"Belgium",socialhome_alg:"Algeria",socialhome_rus:"Russia",socialhome_kor:"Korea Republic",socialhome_vote:"Vote",tug_intent:"I voted for [[country]]!"},fr:{socialhome_social:"Hub social",socialhome_teams:"Équipes",socialhome_players:"Joueurs",socialhome_view:"Afficher:",socialhome_grid:"Grille",socialhome_list:"Liste",socialhome_activitymap:"Carte de l'activité",socialhome_mph:"Mentions par heure",socialhome_tpm:"Mentions par minute",socialhome_total:"Total de mentions",socialhome_sortby:"Trié par",socialhome_sortrank:"Classement",socialhome_sortcountry:"Pays",socialhome_searchplayer:"Chercher un joueur",socialhome_searchcountry:"Sélectionnez un pays",socialhome_filterby:"Filtre",socialhome_selectteam:"Sélectionnez une équipe",socialhome_selectmatch:"Sélectionnez un match",socialhome_showall:"Tout afficher",socialhome_contributors:"#Participez",socialhome_conversation:"Discussion",socialhome_joinconversation:"#Participez dans la discussion",socialhome_hashtag:"#CM2014",socialhome_tweetbutton:"Tweet",socialhome_postbutton:"Partager",socialhome_networkor:"ou",socialhome_all:"Tous",socialhome_fans:"Fans",socialhome_celebs:"Célébrités",socialhome_selectplayer:"Sélectionnez un joueur",socialhome_rank:"Classez",socialhome_popularity:"Le buzz des fans",socialhome_percent:"%",socialhome_teamstats:"Statistiques de l'equipe",socialhome_teamvoice:"La voix de l’équipe",socialhome_toptrending:"Les meilleures tendances",socialhome_playervoice:"La voix du joueur",socialhome_playerstats:"Statistiques de joueurs",socialhome_team:"Equipe",socialhome_groupa:"Groupe A",socialhome_groupb:"Groupe B",socialhome_groupc:"Groupe C",socialhome_groupd:"Groupe D",socialhome_groupe:"Groupe E",socialhome_groupf:"Groupe F",socialhome_groupg:"Groupe G",socialhome_grouph:"Groupe H",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"Pas de tweet récent. Revenez plus tard !",socialhome_tugtext:"Quelle équipe soutenez-vous ? Votez maintenant.",socialhome_bra:"Brésil",socialhome_cro:"Croatie",socialhome_mex:"Mexique",socialhome_cam:"Cameroun",socialhome_esp:"Espagne",socialhome_ned:"Pays-Bas",socialhome_chi:"Chili",socialhome_aus:"Australie",socialhome_col:"Colombie",socialhome_gre:"Grèce",socialhome_civ:"Côte d'Ivoire",socialhome_jpn:"Japon",socialhome_uru:"Uruguay",socialhome_crc:"Costa Rica",socialhome_eng:"Angleterre",socialhome_ita:"Italie",socialhome_sui:"Suisse",socialhome_ecu:"Equateur",socialhome_fra:"France",socialhome_hon:"Honduras",socialhome_arg:"Argentine",socialhome_bih:"Bosnie-et-Herzégovine",socialhome_irn:"Iran",socialhome_nga:"Nigeria",socialhome_ger:"Allemagne",socialhome_por:"Portugal",socialhome_gha:"Ghana",socialhome_usa:"USA",socialhome_bel:"Belgique",socialhome_alg:"Algérie",socialhome_rus:"Russie",socialhome_kor:"République de Corée",socialhome_vote:"Votez",tug_intent:"J'ai voté pour [[country]]!"},es:{socialhome_social:"Social",socialhome_teams:"Equipos",socialhome_players:"Jugadores",socialhome_view:"Ver:",socialhome_grid:"Tabla",socialhome_list:"Lista",socialhome_activitymap:"Mapa de actividad en vivo",socialhome_mph:"Menciones por hora",socialhome_tpm:"Tweets por minuto",socialhome_total:"Menciones totales",socialhome_sortby:"Ordenar por:",socialhome_sortrank:"Nivel",socialhome_sortcountry:"País",socialhome_searchplayer:"Busca un jugador ",socialhome_searchcountry:"Selecciona un país",socialhome_filterby:"Filtrar",socialhome_selectteam:"Elige un equipo",socialhome_selectmatch:"Elegir un partido",socialhome_showall:"Mostrar todos",socialhome_contributors:"#Únete con",socialhome_conversation:"Conversación global",socialhome_joinconversation:"#Únete a la conversación",socialhome_hashtag:"#Brasil2014",socialhome_tweetbutton:"Tweet",socialhome_postbutton:"Compártelo",socialhome_networkor:"o",socialhome_all:"Todos",socialhome_fans:"Aficionados",socialhome_celebs:"Celebridades",socialhome_selectplayer:"Elegir un jugador",socialhome_rank:"Clasificación",socialhome_popularity:"Jugador en el foco",socialhome_percent:"%",socialhome_teamstats:"Estadísticas del Equipo",socialhome_teamvoice:"La voz del equipo",socialhome_toptrending:"Tendencias",socialhome_playervoice:"La voz del jugador",socialhome_playerstats:"Estadísticas de jugadores",socialhome_team:"Equipo",socialhome_groupa:"Grupo A",socialhome_groupb:"Grupo B",socialhome_groupc:"Grupo C",socialhome_groupd:"Grupo D",socialhome_groupe:"Grupo E",socialhome_groupf:"Grupo F",socialhome_groupg:"Grupo G",socialhome_grouph:"Grupo H",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"No hay tweets recientes. ¡Regresa luego!",socialhome_tugtext:"¿A qué equipo apoyas? Vota ahora",socialhome_bra:"Brasil",socialhome_cro:"Croacia",socialhome_mex:"México",socialhome_cam:"Camerún",socialhome_esp:"España",socialhome_ned:"Países Bajos",socialhome_chi:"Chile",socialhome_aus:"Australia",socialhome_col:"Colombia",socialhome_gre:"Grecia",socialhome_civ:"Costa de Marfil",socialhome_jpn:"Japón",socialhome_uru:"Uruguay",socialhome_crc:"Costa Rica",socialhome_eng:"Inglaterra",socialhome_ita:"Italia",socialhome_sui:"Suiza",socialhome_ecu:"Ecuador",socialhome_fra:"Francia",socialhome_hon:"Honduras",socialhome_arg:"Argentina",socialhome_bih:"Bosnia y Herzegovina",socialhome_irn:"Irán",socialhome_nga:"Nigeria",socialhome_ger:"Alemania",socialhome_por:"Portugal",socialhome_gha:"Ghana",socialhome_usa:"EEUU",socialhome_bel:"Bélgica",socialhome_alg:"Argelia",socialhome_rus:"Rusia",socialhome_kor:"República de Corea",socialhome_vote:"Votar",tug_intent:"Voté como ganador a [[country]]"},de:{socialhome_social:"Redes",socialhome_teams:"Mannschaften",socialhome_players:"Spieler",socialhome_view:"Anschauen:",socialhome_grid:"Raster",socialhome_list:"Liste",socialhome_activitymap:"Live Aktivitätskarte",socialhome_mph:"Erwähnungen pro Stunde",socialhome_tpm:"Tweets pro Minute",socialhome_total:"Erwähnungen insgesamt",socialhome_sortby:"Sortieren nach",socialhome_sortrank:"Ranglistenplatz",socialhome_sortcountry:"Land",socialhome_searchplayer:"Suche nach Spieler",socialhome_searchcountry:"Wähle ein Land",socialhome_filterby:"Filtern nach:",socialhome_selectteam:"Team aussuchen",socialhome_selectmatch:"Wähle ein Spiel",socialhome_showall:"Alle anzeigen",socialhome_contributors:"#Seidabei mit…",socialhome_conversation:"Globale Konversation",socialhome_joinconversation:"#Seidabei und rede mit!",socialhome_hashtag:"#WM2014",socialhome_tweetbutton:"Tweet",socialhome_postbutton:"Verbreiten",socialhome_networkor:"oder",socialhome_all:"Alle",socialhome_fans:"Fans",socialhome_celebs:"Berühmtheiten",socialhome_selectplayer:"Wähle einen Spieler",socialhome_rank:"Rang",socialhome_popularity:"Fan Buzz",socialhome_percent:"%",socialhome_teamstats:"Mannschafts-Statistiken",socialhome_teamvoice:"Team-Geflüster",socialhome_toptrending:"Top Trends",socialhome_playervoice:"Spieler-Geflüster",socialhome_playerstats:"Spieler-Statistik",socialhome_team:"Team",socialhome_groupa:"Gruppe A",socialhome_groupb:"Gruppe B",socialhome_groupc:"Gruppe C",socialhome_groupd:"Gruppe D",socialhome_groupe:"Gruppe E",socialhome_groupf:"Gruppe F",socialhome_groupg:"Gruppe G",socialhome_grouph:"Gruppe H",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"Gerade gibt's keine neuen Tweets. Komm später wieder!",socialhome_tugtext:"Which team do you support? Vote now.",socialhome_bra:"Brasilien",socialhome_cro:"Kroatien",socialhome_mex:"Mexiko",socialhome_cam:"Kamerun",socialhome_esp:"Spanien",socialhome_ned:"Niederlande",socialhome_chi:"Chile",socialhome_aus:"Australien",socialhome_col:"Kolumbien",socialhome_gre:"Griechenland",socialhome_civ:"Elfenbeinküste",socialhome_jpn:"Japan",socialhome_uru:"Uruguay",socialhome_crc:"Costa Rica",socialhome_eng:"England",socialhome_ita:"Italien",socialhome_sui:"Schweiz",socialhome_ecu:"Ecuador",socialhome_fra:"Frankreich",socialhome_hon:"Honduras",socialhome_arg:"Argentinien",socialhome_bih:"Bosnien und Herzegowina",socialhome_irn:"Iran",socialhome_nga:"Nigeria",socialhome_ger:"Deutschland",socialhome_por:"Portugal",socialhome_gha:"Ghana",socialhome_usa:"USA",socialhome_bel:"Belgien",socialhome_alg:"Algerien",socialhome_rus:"Russland",socialhome_kor:"Korea Republik",socialhome_vote:"Abstimmen",tug_intent:"Ich habe auf einen Sieg für [[country]] gestimmt"},pt:{socialhome_social:"Social",socialhome_teams:"Equipes",socialhome_players:"Jogadores",socialhome_view:"Ver:",socialhome_grid:"Grid",socialhome_list:"Lista",socialhome_activitymap:"Mapa de atividade em tempo real",socialhome_mph:"Menções por hora",socialhome_tpm:"Tweets por minuto",socialhome_total:"Menções no total",socialhome_sortby:"Separar por",socialhome_sortrank:"Classificação",socialhome_sortcountry:"País",socialhome_searchplayer:"Buscar por um Jogador",socialhome_searchcountry:"Selecione um país",socialhome_filterby:"Filtrar por",socialhome_selectteam:"Escolha a equipe",socialhome_selectmatch:"Escolha uma partida",socialhome_showall:"Mostrar todos",socialhome_contributors:"#FaçaParte de….",socialhome_conversation:"O que se fala pelo mundo",socialhome_joinconversation:"#FaçaParte do papo",socialhome_hashtag:"#Copa2014",socialhome_tweetbutton:"Tweet",socialhome_postbutton:"Compartilhar",socialhome_networkor:"ou",socialhome_all:"Todos",socialhome_fans:"Torcedores",socialhome_celebs:"Celebridades",socialhome_selectplayer:"Escolha um jogador",socialhome_rank:"Ranquear",socialhome_popularity:"Na boca do povo",socialhome_percent:"%",socialhome_teamstats:"Estatísticas da Equipe",socialhome_teamvoice:"A voz da equipe",socialhome_toptrending:"Assuntos do momento",socialhome_playervoice:"A voz dos jogadores",socialhome_playerstats:"Estatísticas do Jogador",socialhome_team:"Equipe",socialhome_groupa:"Grupo A",socialhome_groupb:"Grupo B",socialhome_groupc:"Grupo C",socialhome_groupd:"Grupo D",socialhome_groupe:"Grupo E",socialhome_groupf:"Grupo F",socialhome_groupg:"Grupo G",socialhome_grouph:"Grupo H",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"Não há tweets no momento. Confira de novo em breve!",socialhome_tugtext:"Para qual time você torce? Vote agora.",socialhome_bra:"Brasil",socialhome_cro:"Croácia",socialhome_mex:"México",socialhome_cam:"Camarões",socialhome_esp:"Espanha",socialhome_ned:"Holanda",socialhome_chi:"Chile",socialhome_aus:"Austrália",socialhome_col:"Colômbia",socialhome_gre:"Grécia",socialhome_civ:"Costa do Marfim",socialhome_jpn:"Japão",socialhome_uru:"Uruguai",socialhome_crc:"Costa Rica",socialhome_eng:"Inglaterra",socialhome_ita:"Itália",socialhome_sui:"Suíça",socialhome_ecu:"Equador",socialhome_fra:"França",socialhome_hon:"Honduras",socialhome_arg:"Argentina",socialhome_bih:"Bósnia e Herzegovina",socialhome_irn:"Irã",socialhome_nga:"Nigéria",socialhome_ger:"Alemanha",socialhome_por:"Portugal",socialhome_gha:"Gana",socialhome_usa:"EUA",socialhome_bel:"Bélgica",socialhome_alg:"Argélia",socialhome_rus:"Rússia",socialhome_kor:"Coreia do Sul",socialhome_vote:"Votar",tug_intent:"Eu votei para [[country]] ganhar"},ar:{socialhome_social:"إجتماعي",socialhome_teams:"فرق",socialhome_players:"لاعبون",socialhome_view:"شاهد",socialhome_grid:"شبكة",socialhome_list:"القائمة",socialhome_activitymap:"خريطة النشاطات الحية",socialhome_mph:"يُذكر في كل ساعة",socialhome_tpm:"تغريدات في كل دقيقة",socialhome_total:"عدد مرات الذكر",socialhome_sortby:"رتب حسب:",socialhome_sortrank:"ترتيب ",socialhome_sortcountry:"البلد",socialhome_searchplayer:"البحث عن لاعب معين",socialhome_searchcountry:"اختر الدولة ",socialhome_filterby:"رتب حسب:",socialhome_selectteam:"اختر منتخب",socialhome_selectmatch:"اختر مباراة",socialhome_showall:"ظهر الكل",socialhome_contributors:"..شاركنا#",socialhome_conversation:"محادثات عالمية",socialhome_joinconversation:"شاركنا في المحادثة#",socialhome_hashtag:"#كأس_العالم",socialhome_tweetbutton:"غرّد",socialhome_postbutton:"شارك",socialhome_networkor:"أو",socialhome_all:"كل",socialhome_fans:"المشاهير",socialhome_celebs:"إحتفالات",socialhome_selectplayer:"اختر لاعب",socialhome_rank:"صنّف",socialhome_popularity:"صوت الجماهير",socialhome_percent:"%",socialhome_teamstats:"إحصائيات الفريق",socialhome_teamvoice:"صوت المنتخب",socialhome_toptrending:"الأكثر تداولا",socialhome_playervoice:"صوت اللاعبين",socialhome_playerstats:"إحصائيات خاصة باللاعبين",socialhome_team:"فريق",socialhome_groupa:"A مجموعة",socialhome_groupb:"B مجموعة",socialhome_groupc:"C مجموعة",socialhome_groupd:"D مجموعة",socialhome_groupe:"E مجموعة",socialhome_groupf:"F مجموعة",socialhome_groupg:"G مجموعة",socialhome_grouph:"H مجموعة",socialhome_twitter:"Twitter",socialhome_facebook:"Facebook",socialhome_instagram:"Instagram",socialhome_notweets:"لا يوجد تغريدات حديثة",socialhome_tugtext:"أي فريق تشجع؟ صوّت الآن",socialhome_bra:"البرازيل",socialhome_cro:"كرواتيا",socialhome_mex:"المكسيك",socialhome_cam:"الكاميرون",socialhome_esp:"أسبانيا",socialhome_ned:"هولندا",socialhome_chi:"تشيلي",socialhome_aus:"أستراليا",socialhome_col:"كولومبيا",socialhome_gre:"اليونان",socialhome_civ:"كوت ديفوار",socialhome_jpn:"اليابان",socialhome_uru:"أوروجواي",socialhome_crc:"كوستاريكا",socialhome_eng:"انجلترا",socialhome_ita:"إيطاليا",socialhome_sui:"سويسرا",socialhome_ecu:"الإكوادور",socialhome_fra:"فرنسا",socialhome_hon:"هندوراس",socialhome_arg:"الأرجنتين",socialhome_bih:"البوسنة والهرسك",socialhome_irn:"إيران",socialhome_nga:"نيجيريا",socialhome_ger:"المانيا",socialhome_por:"البرتغال",socialhome_gha:"غانا",socialhome_usa:"الولايات المتحدة الأمريكية",socialhome_bel:"بلجيكا",socialhome_alg:"الجزائر",socialhome_rus:"روسيا",socialhome_kor:"جمهورية كوريا",socialhome_vote:"صوّت",tug_intent:"لقد صوتّ ليفوز [[country]]"}},n("js/lang",function(){}),t.config({map:{"*":{underscore:"js/lodash",jquery:"js/jquery",lodash:"js/lodash"}}}),n("js/processData",["require","massrel-js-backbone","massrel-js","moment","./data","./lang"],function(e){function o(e){this.defaults={dataUrl:"//s3.amazonaws.com/massrel-pub/fifa14/fifa14-all-data.json?"+(new Date).getTime(),locale:"en",localeCode:"en-US"},this.config=$.extend(this.defaults,e),MR.ENV.hash.team?this.config.team=MR.ENV.hash.team:this.config.team=43954}var t=e("massrel-js-backbone"),n=e("massrel-js"),r=e("moment"),i=e("./data"),s=e("./lang");return o.prototype.init=function(e){this.callback=e,this._getData()},o.prototype._getData=function(){var e=this;n.helpers.request_factory(this.config.dataUrl,[],"_",this,_.bind(this._processData,this))},o.prototype._numberFormat=function(e){var t=this,n={"en-US":",","ar-EG":",","de-DE":".","fr-FR":" ","es-ES":".","pt-BR":"."};while(/(\d+)(\d{3})/.test(e.toString()))e=e.toString().replace(/(\d+)(\d{3})/,"$1"+n[t.config.localeCode]+"$2");return e},o.prototype._splitName=function(e){var t={},n;return n=e.split(" "),n.length>2?(t.first=n[0],t.last=n[n.length-1]):(t.first=n[0],t.last=n[1]),t},o.prototype._splitDate=function(e){var t=r(e),n={day:t.format("DD"),month:t.format("MMM"),time:t.format("HH:MM")};return n},o.prototype._parseKeywords=function(e){var t=this,n="";if(e.length)return _.each(e,function(e,t){t!==0&&(n+=","),n+='"'+e+'"'}),n},o.prototype._processData=function(e){var t=this;t.data=e;var n={};_.each(t.data.teams,function(e,r){n[e.abbrLower]={},e.bgSize=Modernizr.backgroundsize,e.abbrLower=e.nameShort.toLowerCase(),e.name=e.nameLang[t.config.locale]&&e.nameLang[t.config.locale]||e.name,e.countsFormat={tpm:t._numberFormat(e.counts.tpm),hourly:t._numberFormat(e.counts.hourly),total:t._numberFormat(e.counts.total)},e.rankLang=t._numberFormat(e.rank),e.sentiment=t._numberFormat(e.sentiment),e.sentimentLess=t._numberFormat(e.sentimentLess),e.tournamentGroup=="A"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupa),e.tournamentGroup=="B"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupb),e.tournamentGroup=="C"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupc),e.tournamentGroup=="D"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupd),e.tournamentGroup=="E"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupe),e.tournamentGroup=="F"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupf),e.tournamentGroup=="G"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_groupg),e.tournamentGroup=="H"&&(n[e.abbrLower].groupLang=t.config.lang.socialhome_grouph),n[e.abbrLower].name=e.name,e.countryGroup=n[e.abbrLower].groupLang,e.id==t.config.team&&(t.data.thisTeam=e)}),t.data.teamPlayers=[],_.each(t.data.players,function(e,r){e.teamIdNumeric=t.data.map.teamCodeToId[e.teamId.toUpperCase()],e.breakName=t._splitName(e.nameLang[t.config.locale]),e.bgSize=Modernizr.backgroundsize,e.name=e.nameLang[t.config.locale]&&e.nameLang[t.config.locale]||e.name,e.nameLower=e.name.toLowerCase(),e.countsFormat={tpm:t._numberFormat(e.counts.tpm),hourly:t._numberFormat(e.counts.hourly),total:t._numberFormat(e.counts.total)},e.rankLang=t._numberFormat(e.rank),e.sentiment=t._numberFormat(e.sentiment),e.sentimentLess=t._numberFormat(e.sentimentLess),e.countryName=n[e.teamId].name,e.countryGroup=n[e.teamId].groupLang,e.teamIdNumeric==t.config.team&&t.data.teamPlayers.push(e)}),_.each(t.data.teamPlayers,function(e,t){e.index=t+1,e.rank=t+1}),t.callback(t.data)},o}),n("hbs/hbs!tmpl1",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div id="mosaic-post">\n  <h2>',(o=n.socialhome_joinconversation)?o=o.call(t,{hash:{}}):(o=t.socialhome_joinconversation,o=typeof o===u?o.apply(t):o),s+=a(o)+'</h2>\n  <div id="mad-lib-container">\n    <input type="text" id="tweet-input" placeholder="',(o=n.socialhome_hashtag)?o=o.call(t,{hash:{}}):(o=t.socialhome_hashtag,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n\n      <div id="tweet-button" class="mr-component mr-component-type-tweet-button-1 mr-component-instance-tweet-button" data-mr-component-id="tweet-button" data-mr-component-type="tweet-button-1"><a href="https://twitter.com/intent/tweet?hashtags=',(o=n.socialhome_hashtagnohash)?o=o.call(t,{hash:{}}):(o=t.socialhome_hashtagnohash,o=typeof o===u?o.apply(t):o),s+=a(o)+'" class="button twitter tweet-button button-style-color" style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;"><i class="icon icon-twitter-logo"></i>\n      <span class="button-text">',(o=n.socialhome_tweetbutton)?o=o.call(t,{hash:{}}):(o=t.socialhome_tweetbutton,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n      </a></div>\n\n    <div class="networks">\n      <span class="or">',(o=n.socialhome_networkor)?o=o.call(t,{hash:{}}):(o=t.socialhome_networkor,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n    </div>\n\n      <div id="fb-post-button" class="mr-component mr-component-type-fb-post-button-1 mr-component-instance-fb-post-button" data-mr-component-id="fb-post-button" data-mr-component-type="fb-post-button-1"><a href="https://massrelevance.com/intents/fb" data-action="fb-post" class="button mr-action-click facebook fb-post-button button-style-color" style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;" data-picture="http://img.fifa.com/images/fwc/2014/tournaments/2014fwcoe_4cf_ps.png" data-name="',(o=n.socialhome_joinconversation)?o=o.call(t,{hash:{}}):(o=t.socialhome_joinconversation,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-caption="',(o=n.socialhome_hashtag)?o=o.call(t,{hash:{}}):(o=t.socialhome_hashtag,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-link="http://www.fifa.com/worldcup/social/index.html"><i class="icon icon-facebook-logo"></i>\n      <span class="button-text">',(o=n.socialhome_postbutton)?o=o.call(t,{hash:{}}):(o=t.socialhome_postbutton,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n      </a></div>\n\n  </div>\n\n</div>\n\n<nav class="empty"></nav>',s});return t.registerPartial("tmpl1",n),n}),function(e){function r(e){if(e in t.style)return e;var n=["Moz","Webkit","O","ms"],r=e.charAt(0).toUpperCase()+e.substr(1);if(e in t.style)return e;for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style)return s}}function i(){return t.style[n.transform]="",t.style[n.transform]="rotateY(90deg)",t.style[n.transform]!==""}function f(e){return typeof e=="string"&&this.parse(e),this}function l(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function c(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=d(t),e.inArray(t,n)===-1&&n.push(t)}),n}function h(t,n,r,i){var s=c(t);e.cssEase[r]&&(r=e.cssEase[r]);var o=""+m(n)+" "+r;parseInt(i,10)>0&&(o+=" "+m(i));var u=[];return e.each(s,function(e,t){u.push(t+" "+o)}),u.join(", ")}function p(t,r){r||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=n.transform,e.cssHooks[t]={get:function(n){var r=e(n).css("transit:transform");return r.get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r),e(n).css({"transit:transform":i})}}}function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function v(e,t){return typeof e=="string"&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function m(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),v(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var t=document.createElement("div"),n={},s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition"),n.transitionDelay=r("transitionDelay"),n.transform=r("transform"),n.transformOrigin=r("transformOrigin"),n.transform3d=i();var o={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},u=n.transitionEnd=o[n.transition]||null;for(var a in n)n.hasOwnProperty(a)&&typeof e.support[a]=="undefined"&&(e.support[a]=n[a]);t=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new f},set:function(t,r){var i=r;i instanceof f||(i=new f(i)),n.transform==="WebkitTransform"&&!s?t.style[n.transform]=i.toString(!0):t.style[n.transform]=i.toString(),e(t).data("transform",i)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}),p("scale"),p("translate"),p("rotate"),p("rotateX"),p("rotateY"),p("rotate3d"),p("perspective"),p("skewX"),p("skewY"),p("x",!0),p("y",!0),f.prototype={setFromString:function(e,t){var n=typeof t=="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e),f.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=v(e,"deg")},rotateX:function(e){this.rotateX=v(e,"deg")},rotateY:function(e){this.rotateY=v(e,"deg")},scale:function(e,t){t===undefined&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=v(e,"deg")},skewY:function(e){this.skewY=v(e,"deg")},perspective:function(e){this.perspective=v(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){this._translateX===undefined&&(this._translateX=0),this._translateY===undefined&&(this._translateY=0),e!==null&&e!==undefined&&(this._translateX=v(e,"px")),t!==null&&t!==undefined&&(this._translateY=v(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=v(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this)if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="perspective"||r==="transformOrigin"))continue;r[0]!=="_"&&(e&&r==="scale"?t.push(r+"3d("+this[r]+",1)"):e&&r==="translate"?t.push(r+"3d("+this[r]+",0)"):t.push(r+"("+this[r]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this,a=0,f=!0;typeof r=="function"&&(s=r,r=undefined),typeof i=="function"&&(s=i,i=undefined),typeof t.easing!="undefined"&&(i=t.easing,delete t.easing),typeof t.duration!="undefined"&&(r=t.duration,delete t.duration),typeof t.complete!="undefined"&&(s=t.complete,delete t.complete),typeof t.queue!="undefined"&&(f=t.queue,delete t.queue),typeof t.delay!="undefined"&&(a=t.delay,delete t.delay),typeof r=="undefined"&&(r=e.fx.speeds._default),typeof i=="undefined"&&(i=e.cssEase._default),r=m(r);var c=h(t,r,i,a),p=e.transit.enabled&&n.transition,d=p?parseInt(r,10)+parseInt(a,10):0;if(d===0){var v=function(e){o.css(t),s&&s.apply(o),e&&e()};return l(o,f,v),o}var g={},y=function(r){var i=!1,a=function(){i&&o.unbind(u,a),d>0&&o.each(function(){this.style[n.transition]=g[this]||null}),typeof s=="function"&&s.apply(o),typeof r=="function"&&r()};d>0&&u&&e.transit.useTransitionEnd?(i=!0,o.bind(u,a)):window.setTimeout(a,d),o.each(function(){d>0&&(this.style[n.transition]=c),e(this).css(t)})},b=function(e){this.offsetWidth,y(e)};return l(o,f,b),this},e.transit.getTransitionValue=h,e.support.transition||(e.fn.transition=e.fn.animate)}(jQuery),n("js/jquery.transit.min",function(){}),t.config({map:{"*":{underscore:"js/lodash",jquery:"js/jquery",lodash:"js/lodash"}}}),n("js/index",["require","massrel-js-backbone","massrel-js","./manager","hbs/hbs!grid","hbs/hbs!grid-box","hbs/hbs!player-card","./processData","./data","./lang","hbs/hbs!tmpl1","./jquery.transit.min"],function(e){var t=e("massrel-js-backbone"),n=e("massrel-js"),r=e("./manager"),i=e("hbs/hbs!grid"),s=e("hbs/hbs!grid-box"),o=e("hbs/hbs!player-card"),u=e("./processData"),a=e("./data"),f=e("./lang"),l=e("hbs/hbs!tmpl1");return e("./jquery.transit.min"),{ready:function(e){MR.ENV.instance.on("#avatarWall:avatar-click",function(e){window.open(e.payload.avatar.attributes.profile_url)})},render:function(e){var f=MR.templateConfig.settings;window.MR_components=e;var c=function(e){var t=this;this.config={defaultTab:"players",defaultView:"grid",defaultSort:"rank",loadingDuration:1e3,locale:"en",mosaic:{text:f.tiles.text_tiles_stream_name,images:f.tiles.image_tiles_stream_name}},MR.ENV.hash.lang&&(t.config.locale=MR.ENV.hash.lang),this.config.locale==="en"&&(this.config.localeCode="en-US"),this.config.locale==="ar"&&(this.config.localeCode="ar-EG"),this.config.locale==="de"&&(this.config.localeCode="de-DE"),this.config.locale==="it"&&(this.config.localeCode="it-IT"),this.config.locale==="fr"&&(this.config.localeCode="fr-FR"),this.config.locale==="es"&&(this.config.localeCode="es-ES"),this.config.locale==="pt"&&(this.config.localeCode="pt-BR"),$("body").addClass(t.config.localeCode),this.config.lang=window.fifaLangs[this.config.locale];var e=u=new u(this.config);this.config.lang.socialhome_hashtagnohash=this.config.lang.socialhome_hashtag.length&&this.config.lang.socialhome_hashtag.replace("#",""),$("#tmpl1").html(l(this.config.lang)),$("#lang1").html(this.config.lang.socialhome_contributors),$("#lang2").html(this.config.lang.socialhome_toptrending),this.$cont=$("#ranking"),this.$tug=$("#social-tug"),this.$grid=this.$cont.find("#grid-view"),this.$list=this.$cont.find("#list-view"),this.$nav=this.$cont.find("nav"),this.$loading=this.$cont.find(".loading"),this.$view=this.$cont.find("#view"),this.sorts={},this.tabs={players:{$tab:this.$nav.find("[data-tab='players']")}},this.views={grid:{$cont:this.$cont.find("#grid-view"),tmplView:i,tmplItem:s,$tab:this.$nav.find("[data-view='grid']")}},e.init(function(e){t._init(e)})};c.prototype._init=function(e){var t=this;$(window).width()<=320&&(t.config.mobile=!0),e&&(t.data=e,t._events(),t._update(),t._mosaicSetup(),t._mosaic(t.data.thisTeam.keywords),t.config.mobile||t._mosaicAdidas())},c.prototype._mosaicSetup=function(){var e=this;MR.ENV.instance.on("#statusModal:showStatusAndView",function(e){MR.modal.open({data:{model:e.payload.model,View:e.payload.view},fallback:_.bind(MR.ENV.instance.trigger,MR.ENV.instance,"#modal:show")})})},c.prototype._mosaic=function(t){var n=this,i=window.manager=new r({frequency:f.tiles.animation_frequency}),s=n.config.mosaic.images,o=n.config.mosaic.text;i.addGroup("image",{stream_name:s,embed_media:!0,keywords:t},{status_component:e.statusMedia,require_media:!0,handleDetails:function(e){e.model&&(MR.ENV.instance.trigger("#statusModal:findStatusView",e),MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"clickMosaicPhoto"}))}}),i.addGroup("text",{stream_name:o,keywords:t},{status_component:e.statusText}),i.addTile(e["tile-1"],"image",{}),i.addTile(e["tile-2"],"text",{}),n.config.mobile?i.addTile(e["tile-3"],"image",{}):i.addTile(e["tile-3"],"text",{}),i.addTile(e["tile-4"],"image",{}),i.start(),MR.resize({scrolling:!1})},c.prototype._updateMosaic=function(e){var t=this;t._mosaic(e)},c.prototype._mosaicAdidas=function(){var t=this,n=window.managerAdidas=new r({frequency:f.tiles.animation_frequency});n.addGroup("imageAdidas",{stream_name:f.tiles.sponsored_image_stream,embed_media:!0},{status_component:e.statusMedia,require_media:!0}),n.addGroup("textAdidas",{stream_name:f.tiles.sponsored_text_stream},{status_component:e.statusText}),n.addGroup("imageModal",{stream_name:f.tiles.sponsored_image_stream,embed_media:!0},{status_component:e.statusMedia,require_media:!0}),n.addGroup("text",{stream_name:f.tiles.sponsored_text_stream},{status_component:e.statusText}),n.addTile(e["adidas-tile-1"],"textAdidas",{}),n.addTile(e["modal-tile-1"],"imageModal",{}),n.addTile(e["modal-tile-2"],"imageModal",{}),n.addTile(e["modal-tile-3"],"text",{}),n.addTile(e["modal-tile-4"],"imageModal",{}),n.addTile(e["modal-tile-5"],"text",{}),n.addTile(e["modal-tile-6"],"imageModal",{}),n.start(),t._mosaicEvents()},c.prototype._mosaicEvents=function(){var e=this,t=$("#mosaic #grid").find(".adidas");t.on("click",function(){var e=$("#modal-mosaic-content .modal-mosaic").clone(),t=Backbone.View.extend({initialize:function(){this.render()},render:function(){return this.$el.html(e),this}}),n={model:new Backbone.Model({}),View:t};MR.modal.open({data:n,fallback:_.bind(MR.ENV.instance.trigger,MR.ENV.instance,"#modal:show")}),MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"clickMosaicBrandedTile"})}),$("#grid").on("click",".intent-retweet",function(){MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"retweet"})}),$("#grid").on("click",".intent-favorite",function(){MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"favorite"})}),$("#grid").on("click",".intent-reply",function(){MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"reply"})}),$("#mosaic-post").on("click",".tweet-button",function(){MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"inlineTweet"})}),$("#mosaic-post").on("click",".fb-post-button",function(){MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"facebookPost"})})},c.prototype._events=function(){var n=this,r=n.$tug.find(".vote-select"),i=r.find(".vote-show"),s=r.find("i");r.on("click",".vote-show:not(.disabled)",function(){i.removeClass("selected"),$(this).addClass("selected")}),s.on("click",function(){i.removeClass("selected")}),MR.ENV.instance.on("#modal:open",function(){function i(){function i(i,s){$("#modal nav li").removeClass("selected"),$("#modal nav li."+s).addClass("selected"),n.empty(),r.poller=new t.StreamPoller({stream_name:r.sourceStreamName,from:i.toLowerCase(),network:s,embed_media:!0,limit:10}),r.poller.on("loaded-batch",function(){n.find(".none").hide(),n.find(".loading").fadeOut(),_.each(r.poller.queue.models,function(t){var r=e.status.viewFactory(t),i=new r({model:t}),s=i.render().$el;n.append(s)}),r.poller.stop()}),r.poller.on("no-data",function(){n.find(".loading").hide(),n.find(".none").show(),r.poller.stop()}),r.poller.start()}var n=$("#modal #cardStream");r.account&&(r.account.twitter?i(r.account.twitter,"twitter"):r.account.facebook?i(r.account.facebook,"facebook"):r.account.instagram&&i(r.account.instagram,"instagram")),$("#modal nav li").on("click",function(e){var t=$(this).data("network");i(r.account[t],t)})}var r=n.openedCard;setTimeout(i,1e3)})},c.prototype._resizeGridImages=function(){var e=this;if(!Modernizr.backgroundsize&&!e.config.mobile){var t=e.$grid.find(".box").not(".ad");t.each(function(e,t){var n=$(t),r=n.find("img"),i={box:{width:n.width(),height:n.height()},img:{width:r.width(),height:r.height()}};i.box.ratio=i.box.width/i.box.height,i.img.ratio=i.img.width/i.img.height;if(i.img.ratio>i.box.ratio){var s=Math.ceil(i.img.ratio/i.box.ratio*100),o=(s-100)/2*-1;r.css({width:s+"%","margin-left":o+"%"})}else if(i.img.ratio<i.box.ratio){var s=Math.ceil(i.box.ratio/i.img.ratio*100),o=(s-100)/4*-1;r.css({width:"100%"})}else r.css({width:"100%"})})}},c.prototype._card=function(e){function u(n){n.activity.hourly.total[0]>n.activity.hourly.total[1]?e.trend="up":n.activity.hourly.total[0]<n.activity.hourly.total[1]&&(e.trend="down");var r=e.tmpl(e),i=Backbone.View.extend({initialize:function(){this.render()},render:function(){return this.$el.html(r),this}}),s={model:new Backbone.Model({}),View:i,item:e,localeCode:t.config.localeCode};MR.modal.open({data:s,fallback:_.bind(MR.ENV.instance.trigger,MR.ENV.instance,"#modal:show")})}function f(){a++,e.sourcing.facebook.pages.length?setTimeout(function(){e.account.facebook||a==5?n.helpers.request_factory(r,[],"_",this,_.bind(u,this)):f()},300):n.helpers.request_factory(r,[],"_",this,_.bind(u,this))}var t=this,r="//api.massrelevance.com/"+e.streamName+"/meta.json";e.sourcing.twitter.accounts.length&&(e.account||(e.account={}),e.account.twitter=e.sourcing.twitter.accounts[0]);if(e.sourcing.facebook.pages.length){var i="//graph.facebook.com/"+e.sourcing.facebook.pages[0];function s(t){e.account||(e.account={}),e.account.facebook=t.id}n.helpers.request_factory(i,[],"_",this,_.bind(s,this))}e.sourcing.instagram.accounts.length&&(e.account||(e.account={}),e.account.instagram=e.sourcing.instagram.accounts[0]),e.lang=t.config.lang,e.player?(e.sourceStreamName="vincegianno/fifa14-players-all",e.tmpl=o):e.team&&(e.sourceStreamName="vincegianno/fifa14-teams-all",e.tmpl=tmplTeam),t.openedCard=e;var a=0;f()},c.prototype._playerEvents=function(){var e=this,t=this.$grid.find(".box.player"),n=this.$list.find("li.player"),r=function(t,n){var r=$(t),t=r.data("item"),i;_.each(e.data.players,function(e){e.id==t&&(i=e)}),r.off(),r.is(".box")?r.on("click",function(){e._card(i),MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"clickPlayer"})}):r.on("click","span:not(.tweet) span:not(.button-text)",function(){e._card(i),MR.analytics.trackEvent({category:"adhoccp:FIFAWorldCup2014",action:"click",label:"clickPlayer"})})};_.each(n,function(e,t){r(e,t)}),_.each(t,function(e,t){r(e,t)})},c.prototype._update=function(e){var t=this,n=t.selectedTab||t.config.defaultTab,r=t.selectedView||t.config.defaultView,i=t.views[r].$cont,s=t.views[r].tmplView,o=t.views[r].tmplItem,u=e||t.data.teamPlayers,a=function(){var e=t.$cont.find(".card");e.transition({opacity:0},function(){e.hide()}),u=u.slice(0,6),u[n]=!0,u.settings=MR.templateConfig.settings,i.show().html(s(u)),_.each(u,function(e){var t=o(e);i.append(t)}),t._resizeGridImages(),t.$view.transition({opacity:1},t.config.loadingDuration),t.$loading.transition({opacity:0},t.config.loadingDuration,function(){t.$loading.hide(),MR.resize({scrolling:!1})}),t._playerEvents()};t.$loading.show().transition({opacity:1},t.config.loadingDuration,function(){a()})};var h=new c(a)},modal:{ready:function(e){},render:function(e){function i(){function i(i,s){$("#modal nav li").removeClass("selected"),$("#modal nav li."+s).addClass("selected"),n.empty(),r.poller=new t.StreamPoller({stream_name:r.sourceStreamName,from:i.toLowerCase(),network:s,embed_media:!0,limit:10}),r.poller.on("loaded-batch",function(){n.find(".none").hide(),n.find(".loading").fadeOut(),_.each(r.poller.queue.models,function(t){var r=e.status.viewFactory(t),i=new r({model:t}),s=i.render().$el;n.append(s)}),r.poller.stop()}),r.poller.on("no-data",function(){n.find(".loading").hide(),n.find(".none").show(),r.poller.stop()}),r.poller.start()}var n=$("#modal #cardStream");r.account&&(r.account.twitter?i(r.account.twitter,"twitter"):r.account.facebook?i(r.account.facebook,"facebook"):r.account.instagram&&i(r.account.instagram,"instagram")),$("#modal nav li").on("click",function(e){var t=$(this).data("network");i(r.account[t],t)})}var n=MR.modal.getData(),r=n.item||null;r&&setTimeout(i,1e3),$("body").addClass(n.localeCode),MR.ENV.instance.trigger("#modal:show",MR.modal.getData()),MR.ENV.instance.on("#modal:close",function(){MR.modal.close()})}}}}),t(["js/index"]),window.MRT.require=t,window.MRT.define=n,window.MRT.requirejs=e}();