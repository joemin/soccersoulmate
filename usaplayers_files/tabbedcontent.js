define(['frameworks/bundle'],function () {;(function($,w,d) {var tabbedcontentModel=fifa.model.extend({initialize:function(options) {var _this=this;fifa.model.prototype.initialize.apply(_this,[options]);},name:'tabbedcontent',view_name:'tabbedcontent:view'});w.models.tabbedcontent=new tabbedcontentModel({bind:['tabChange']});}(window.jQuery||window.jm,window,document));;(function($,w,d) {var tabbedcontentView=fifa.view.extend({tabsLoaded:{},jqXHR:null,last_url:null,$activeTabContent:null,initialize:function(options) {var _this=this;fifa.view.prototype.initialize.apply(_this,[options]);_this.triggerMe('init');},onInit:function() {var _this=this,hashValue=w.location.hash.length ? w.location.hash.substring(1):'';_this.$el.each(function() {var $obj=$(this),obj_tab={$activeTabContent:[],tabsLoaded:{},jqXHR:null};obj_tab.$activeTabContent=$obj.next('.activeTabContent');obj_tab.tabsLoaded[$obj.find('li:first').data('url')]=obj_tab.$activeTabContent.find('.tabs-contents:first').html();$obj.data('obj_tab',obj_tab);if(hashValue) {var $item=$obj.find("li[data-itemid='" + hashValue + "']");_this.changeActiveItem($obj.find(".active"),$item);_this.loadTabContent($item);}});},changeActiveItem:function(previousActive,newActive) {previousActive.removeClass('active');newActive.addClass('active');},onItemClick:function(event) {this.loadTabContent(event.currentTarget,event);},loadTabContent:function(el,evt) {var _this=this,$this=$(el),$tab=$this.closest(__cfg.el),obj_tab=$tab.data('obj_tab'),content_ref=['tab-',$this.index() + 1,'-content'].join(''),requestedUrl=$this.data('url'),cached_data=obj_tab.tabsLoaded[requestedUrl],fillTabContent=function(data) {obj_tab.$activeTabContent.find('.tabs-contents:not(.hidden)').addClass('hidden');var $tabContent=obj_tab.$activeTabContent.find('.' + content_ref);if(!$tabContent.length) {$tabContent=$(['<div class="tabs-contents hidden ',content_ref,'"/>'].join('')).appendTo(obj_tab.$activeTabContent).html(data);}$tabContent.removeClass('hidden');_this.changeActiveItem($tab.find(".active"),$this);fifa.dispatcher.trigger('core:ajaxDataRequire',data);fifa.dispatcher.trigger('core:anchorInit');};if(!requestedUrl) {return;}if(evt) {evt.preventDefault();}if(_this.last_url===requestedUrl) {return;}_this.last_url=requestedUrl;if(obj_tab.jqXHR) {obj_tab.jqXHR.abort();}if(!cached_data) {obj_tab.jqXHR=$.get(requestedUrl.withIgn(),function(data) {obj_tab.tabsLoaded[requestedUrl]=data;fillTabContent(data);});}else {fillTabContent(cached_data);}_this.triggerModel("tabChange");},events:{'click li[data-url]':'onItemClick'},coreOnReinit:function() {var _this=this;_this.setElement(__cfg.el);_this.triggerMe('init');},name:'tabbedcontent:view',model_name:'tabbedcontent'}),__cfg={el:'.nav-tabs',bind:['init','core:reinit']};w.views.tabbedcontent=new tabbedcontentView(__cfg);}(window.jQuery||window.jm,window,document)); });
